<aura:component controller="ApplicationFormController">
    <aura:attribute name="applicant" type="Contact" default="{'sobjectType': 'Contact'}"/>
    <aura:attribute name="total" type="decimal" default=""/>
    <aura:attribute name="recordId" type="Id" />
    <aura:attribute name="applicationSection" type="String" default=""/>
    <aura:attribute name="appSectionPath" type="List" default="[]"/>
    <aura:attribute name="showError" type="Boolean" default="false"/>
    <aura:attribute name="errorMsg" type="String" default="Please update the form entries highlighted in red and try again"/>
    <aura:attribute name="totalAmount" type="Decimal" default="0"/>
    <aura:attribute name="isLimited" type="Boolean" default="false"/>
    
    <aura:handler action="{!c.doInit}" name="init" value="{!this}"/>
    <aura:method name="saveLivingExpensesDetails" action="{!c.saveApplication}" access="PUBLIC"  >
        <aura:attribute name="isShare" type="Boolean" />
        <aura:attribute name="isNext" type="Boolean" />
    </aura:method>
    
    <div class="living-expenses">
        <aura:if isTrue="{!v.showError}">
            <div class="slds-notify slds-notify_toast slds-theme_error slds-align_absolute-center slds-m-vertical--medium">
                <span class="slds-assistive-text">error</span>
                <div class="slds-notify__content">
                    <p class="slds-align_absolute-center">{!v.errorMsg}.</p>                
                </div>
            </div>
        </aura:if>
        <lightning:spinner aura:id="mySpinner" variant="brand" size="large" class="" />
        <header class="checkout-page-banner1--gradient max-700">
            <div class="slds-align_absolute-center slds-m-top_x-large">
                <img src="{!$Resource.SolarLoan + '/img/Steplivingexpenses.png'}" class="trackercls"/>
            </div>
            <div class="slds-align1_absolute-center ">
                <div class="page-banner__content1-text slds-p-around_medium slds-m-top_medium">
                    <h1 class="header-text">List your <u>monthly</u> essential living expenses</h1>
                    <div style="text-transform:none;text-align:left;">
                        <p style="color: #1e8ffd!important;font-weight: bold;">
                            Use the slider for a faster process
                        </p>
                    </div>
                </div>
            </div>
        </header>
        
        <aura:if isTrue="{!v.isLimited}"> 
            
            <section class="max-700 slds-p-around--medium slds-col slds-si1ze_1-of-1 bg-lightest1 txt-blue">   
                <div class="slds-form " onchange="{!c.totalExpenses}">

                    <c:RangeSelectionBar heading="All property" sliderNo="i" val="{!v.applicant.Utilities__c}"
                                         subHeading ="Utilities, rates, levies and maintenance (not loans)"
                                         />
                    
                    <c:RangeSelectionBar heading="Groceries &amp; transport " sliderNo="ii" val="{!v.applicant.Groceries_transport__c}"
                                         subHeading ="include vehicle, public transport"
                                         
                                         /> 
                    
                    <c:RangeSelectionBar heading="Clothing &amp; entertainment " sliderNo="iii" val="{!v.applicant.Clothing_and_entertainment__c}"
                                         subHeading ="include recreation, personal care"
                                         
                                         />
                    
                    <c:RangeSelectionBar heading="Insurance &amp; medical " sliderNo="iv" val="{!v.applicant.Insurance_and_medical__c}"
                                         subHeading ="include all insurances"
                                         
                                         />
                    
                    <c:RangeSelectionBar heading="Education &amp; childcare " sliderNo="v" val="{!v.applicant.Education_and_childcare__c}"
                                         subHeading ="Day care, nannies, school fees and tutoring"
                                         
                                         />
                    
                    <c:RangeSelectionBar heading="Other " sliderNo="vi" val="{!v.applicant.Other_Regular_Expenditure__c}"
                                         subHeading ="include gambling and anything else"
                                         
                                         />
                    <div class="slds-m-vertical_medium div-color">
                        <div class="" title="Total Amount">
                            Total Expenses: $<lightning:formattedNumber value="{!v.totalAmount}" maximumFractionDigits="2"/>
                        </div>
                    </div>
                </div>
            </section>
            
            <aura:set attribute="else">
                <section class="max-700 slds-p-around--medium slds-col slds-si1ze_1-of-1 bg-lightest1 txt-blue">   
                    <div class="slds-form " onchange="{!c.totalExpenses}">

                        <c:RangeSelectionBar heading="All property" sliderNo="i" val="{!v.applicant.Utilities__c}"
                                             subHeading ="Utilities, rates, levies and maintenance (not loans)"
                                             isIconImag = "true" imgName = "AllProperty.png"
                                             />
                        
                        <c:RangeSelectionBar heading="Insurance" sliderNo="ii" val="{!v.applicant.Investment_property_utilities__c}"
                                             subHeading ="Car, house, health and risk"
                                             isIconImag = "true" imgName = "Insurance.png"/>
                        
                        <c:RangeSelectionBar heading="Connections" sliderNo="iii" val="{!v.applicant.Connections_Phone_Mobile_Internet_C__c}"
                                             subHeading ="Phone, internet streaming services"
                                             isIconImag = "true" imgName = "Connections.png"/>
                        
                        <c:RangeSelectionBar heading="Groceries" sliderNo="vi" val="{!v.applicant.Food_Groceries_Meat_Fruit_Vegetabl__c}"
                                             subHeading ="Food &amp; supermarket"
                                             isIconImag = "true" imgName = "groceries.png"/>
                        
                        <c:RangeSelectionBar heading="Transport" sliderNo="viii" val="{!v.applicant.Transport_Public_Petrol_Registration__c}"
                                             subHeading ="Public transport, fuel, serving &amp; registration"
                                             isIconImag = "true" imgName = "Transport.png"/>
                        
                        <c:RangeSelectionBar heading="Medical and sport" sliderNo="ix" val="{!v.applicant.Medical_Private_Health_Insurance_Ong__c}"
                                             subHeading ="Doctor, dentist, physio, gym and training"
                                             isIconImag = "true" imgName = "MedicalandSport.png"/>
                        
                        <c:RangeSelectionBar heading="Clothing and personal care" sliderNo="vii" val="{!v.applicant.Clothing_and_personal_care__c}"
                                             subHeading ="Inc. footwear, cosmetics &amp; personal care"
                                             isIconImag = "true" imgName = "ClothingandPersonalCare.png"/>
                        
                        <c:RangeSelectionBar heading="Entertainment" sliderNo="xii" val="{!v.applicant.Entertainment_Dining_Out_Movies_Gift__c}"
                                             subHeading ="Essential recreation and entertainment"
                                             isIconImag = "true" imgName = "Entertainment.png"/>
                        
                        <c:RangeSelectionBar heading="Childcare" sliderNo="iv" val="{!v.applicant.Education_ChildCare_SchoolFees_Uniform__c}"
                                             subHeading ="Day care, nannies, school fees and tutoring"
                                             isIconImag = "true" imgName = "Childcare.png"/>
                        
                        <c:RangeSelectionBar heading="Gambling" sliderNo="xiii" val="{!v.applicant.Gambling_Betting_and_Lottery__c}"
                                             subHeading ="Gambling, Betting &amp; lotto"
                                             isIconImag = "true" imgName = "Gambling.png"/>
                        
                        
                        <div class="slds-m-vertical_medium div-color">
                            <div class="" title="Total Amount">
                                Total Expenses: $<lightning:formattedNumber value="{!v.totalAmount}" maximumFractionDigits="2"/>
                            </div>
                        </div>
                    </div>
                </section>
            </aura:set>
        </aura:if>
        <div class="max-700 preNxtBtn slds-p-around_medium" style="margin-bottom: 40px;">
            <div class="slds-grid slds-wrap">
                <div class="slds-size_1-of-2">
                    <lightning:button class="slds-m-vertical_medium slds-float_left privious-button_style" variant="brand" 
                                      label="Go Back" title="Go Back" 
                                      onclick="{! c.prevSave }" />
                </div>
                <div class="slds-size_1-of-2 customsave">
                    <lightning:button class="slds-m-vertical_medium slds-float_right save-button_style" variant="success" 
                              label="Save &amp; Next" title="Save &amp; Next" 
                              onclick="{! c.save }" />
                </div>
            </div>
            
        </div>
    </div>
</aura:component>