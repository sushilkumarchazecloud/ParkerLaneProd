<apex:page controller="Digital_ID_Sign" docType="html-5.0"  manifest="/apex/CacheManifestVF" sidebar="false" showHeader="false" standardStylesheets="false">
    <html>
        <head>
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
            <apex:stylesheet value="{!$Resource.fontAwsome + '/fontAwsome/css/all.css'}"/>
            <apex:includeScript value="{!$Resource.fontAwsome + '/fontAwsome/js/all.js'}"/>
            <apex:includeScript value="/soap/ajax/20.0/connection.js"/>
            
            <apex:includeScript value="/soap/ajax/20.0/apex.js"/>
            <apex:includeScript value="{!$Resource.Jquery}"/>
            <apex:includeScript value="{!$Resource.Jquerymin}"/>
            <apex:includeScript value="{!$Resource.ESIGNATURE}"/>
            <apex:includeScript value="{!$Resource.File_Saver}"/>
            <apex:slds />
            <script>
            (function(h,o,t,j,a,r){
                h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
                h._hjSettings={hjid:3089317,hjsv:6};
                a=o.getElementsByTagName('head')[0];
                r=o.createElement('script');r.async=1;
                r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
                a.appendChild(r);
            })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
            </script>
            <!-- Google tag (gtag.js) --> 
            <script src="https://www.googletagmanager.com/gtag/js?id=G-K2K45FK4PR"></script> 
            <script> 
                window.dataLayer = window.dataLayer || []; 
            function gtag(){dataLayer.push(arguments);} 
            gtag('js', new Date()); 
            gtag('config', 'G-K2K45FK4PR'); 
            </script>
            <style>
                @font-face {
                font-family: ProximaNova-AltBold;
                src: url('/resource/customfonts/ProximaNova-AltBold.otf') format('OpenType');
                }
                .slds-scope{
                line-height: 1.1;
                }
                body {
                margin : 0px !important;
                padding : 0px !important;
                background : #fafafa !important;
                }
                .slds-scope .slds-card {
                background : transparent !important; <!--#fafafa !important;-->
                border :none;
                box-shadow : none;
                border-radius : none;
                }
                .card1 .slds-card__header{
                padding : 0px !important;
                }
                
                .logo{
                padding: 9px;
                background-color: #1a2745;
                color: #fff;
                align-items: center;
                width : 100%;
                height : 50px;
                }
                .logo img{
                width: 200px;
                padding: 9px 22px;
                height: 40px;
                }
                .sfLogo{
                height : 103px !important;
                width : 157px;
                }
                @font-face {
                font-family: ProximaNovaAlt-Medium;
                src: url('/resource/customfonts/ProximaNovaAlt-Medium.otf') format('OpenType');
                }
                .Head1 b{
                color : rgba(26,39,69,255);
                font-family: ProximaNova-AltBold;
                font-size : 23px;
                margin-top : 13px;
                }
                .text1{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                text-align: justify;
                line-height: initial;
                }
                
                .DoneText b{
                color : #45c65a;
                font-family: ProximaNova-AltBold;
                font-size : 22px;
                text-align: justify;
                line-height : 1.7;
                }
                
                .fron-Icon{
                position : relative;
                top : 3px;
                }
                
                .step1{
                color : rgb(201 201 201);
                font-size : 14px;
                }
                .photoid{
                color : rgba(26,39,69,255);
                font-family: ProximaNova-AltBold;
                font-size : 20px;
                }
                .icon1 img{
                border-radius: 100%;
                height: 28px;
                width: 26px;
                position: relative;
                top: 6px;
                }
                .icon2 img{
                border-radius: 100%;
                height: 26px;
                width: 26px;
                position: relative;
                top: 6px;
                }
                .icon3 img{
                border-radius: 100%;
                height: 26px;
                width: 26px;
                position: relative;
                top: 6px;
                }
                
                .slds-scope .slds-box.box1{
                border : none;
                }
                
                .box1{
                box-shadow: 5px 5px 5px 0px rgb(0 0 0 / 54%);
                background : #FFFFFF;
                padding : 9px !important;
                height: 62px;
                }
                
                .box2{
                border : 1px solid #EEEEEE;
                margin-top: 13px;
                background : #fafafa;
                padding : 9px !important;
                height: 62px;
                }
                
                .box3{
                border : 2px solid #EEEEEE;
                margin-top: 13px;
                background : #fafafa;
                padding : 9px !important;
                height: 62px;
                }
                .launchbtn button{
                width: 100%;
                height: 65px;
                background: #45c65a;
                border: none;
                border-radius: 6px;
                color: white;
                font-size: 20px;
                font-weight: bold;
                }
                .anchor a{
                color : #1a2745;
                font-size : 16px;
                }
                <!--Card2-->
                @media only screen and (max-width: 600px) {
                #videoFrontDL{
                height : auto !important;
                } 
                #videoBackDL{
                height : auto !important;
                } 
                #canvasForFrontDL{
                height : auto !important;
                }  
                #canvasForBackDL{
                height : auto !important;
                }  
                #videoRec{
                height: 70% !important;
                }
                #preview{
                height: auto !important;
                max-height : 350px;
                }
                .videoRecDiv{
                height : auto !important;
                max-height : 320px;
                }
                }
                .videoDiv{
                width : 100%;
                height : auto !important;
                max-height : 510px;
                overflow : hidden;
                }
                #videoFrontDL {
                width : 100%;
                filter: brightness(1);
                object-fit: cover;
                position:relative;
                top : 0px;
                left : 0px;
                z-index:0;
                }
                #videoBackDL {
                width : 100%;
                filter: brightness(1);
                object-fit: cover;
                position:relative;
                top : 0px;
                left : 0px;
                z-index:0;
                }
                .cameraP{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 17px;
                text-align: justify;
                }
                .capture-Btn{
                height : 69px;
                width : 69px;
                border : 10px solid rgba(69,198,90,255);
                border-radius : 100%;
                }
                #Click-Photo{
                background: rgba(69,198,90,255);
                border-radius: 100%;
                height: 47px;
                width: 47px;
                border: none;
                margin-top : 1px;
                }
                .corner{
                width : 100%;
                height : auto !important;
                max-height : 450px;
                overflow : hidden;
                border: 3px solid #3aa5b0;
                }
                #canvasForFrontDL{
                width : 100%;
                <!--margin : -10px 0px 0px -42px;-->
                height : auto;
                <!--transform: scaleX(-1);-->
                border-radius: 3px;
                position:relative;
                top : 0px;
                left :  0px;
                z-index:0;
                }
                #canvasForBackDL{
                width : 100%;
                <!--margin : -10px 0px 0px -42px;-->
                height : auto;
                <!--transform: scaleX(-1);-->
                border-radius: 3px;
                position:relative;
                top : 0px;
                left :  0px;
                z-index:0;
                }
                .text3{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 20px;
                }
                .takeagain button{
                width : 100%;
                height: 65px;
                font-size: 20px;
                font-weight : 600;
                background : transparent;
                color : #0176d3;
                border : 2px solid #0176d3;
                border-radius : 7px;
                }
                .confirm button{
                background : #45c65a;
                border : none;
                color : #ffffff;
                width : 100%;
                height: 65px;
                font-size: 20px;
                font-weight : 600;
                border-radius : 7px;    
                }
                
                
                <!--Video Section Starts-->
                
                .vHead1 b{
                color : rgba(26,39,69,255);
                font-family: ProximaNova-AltBold;
                font-size : 23px;
                }
                .VsfLogo{
                height : 180px !important;
                width  : 272px;
                }
                .dicsripction{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 17px;
                text-align : left;
                }
                .slds-scope .slds-list_ordered, .slds-scope .slds-list--ordered{
                line-height: normal;
                }
                .launchFrontcam button{
                width: 100%;
                height: 65px;
                background: #45c65a;
                border: none;
                border-radius: 7px;
                color: white;
                font-size: 20px;
                font-weight: bold;
                }
                
                .videroText{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 16px;
                text-align: justify;
                }
                .videoRecDiv{
                width : 80%;
                overflow : hidden;
                }
                #videoRec {
                width: 100%;
                max-height : 320px;
                <!--margin: 0px 0px 0px -20px;-->
                height: 70%;
                <!---webkit-transform: scaleX(-1);-->
                object-fit: cover;
                border-radius : 25px;
                }
                
                .secureText{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 14px;
                text-align: center;
                }
                #random{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 43px;
                font-weight: bold;
                text-align: center;
                line-height : 1;
                }
                .box {
                display: inline-block;
                }
                
                <!--Circle For Video-->
                .main{
                height: 100px;
                width: 100px;
                position: relative;
                }
                #Circle_button{
                position: absolute;
                top: 0px;
                left: 0px;
                }
                .videRecButton {
                position: inherit;
                left : 0px;
                top: 16px;
                height: 68px;
                width: 68px;
                color : white !important;
                font-weight : 500 !important;
                font-size: 17px !important;
                border : none;
                outline : none;
                }
                <!--Circle For Video-->
                
                #videoRecText{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                font-weight : 100;
                }
                
                #preview{
                width : 85%;
                height: 70%;
                webkit-transform: scaleX(-1);
                <!---webkit-transform:rotateY(180deg);-->
                object-fit: cover;
                border-radius : 25px;
                }
                .vide2Text{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 17px;
                }
                .video2text2{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                }
                
                <!--Document Section-->
                .docBox{
                color : blue;
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                font-weight : 100;
                padding : 0px !important;
                }
                
                .ReadListDoc{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 16px;
                text-align : left;
                }
                .creditAPP{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                font-weight : bold;
                text-align : left;
                }
                .oppData{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 16px;
                }
                .Disclaimer{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 16px;
                }
                
                .signText{
                color : green;
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                font-weight : 500;
                }
                
                <!--digital sign-->
                
                .clearText a{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 16px;
                }
                .finishbtn button{
                width: 100%;
                height: 68px;
                background: #45c65a;
                border: none;
                border-radius: 7px;
                color: white;
                font-size: 24px;
                }
                .collapsible{
                background-color: transparent;
                color: blue !important;
                border-bottom : none !important;
                cursor: pointer;
                padding: 18px;
                width: 100%;
                border: 1px solid black;
                border-left : none;
                border-right : none;
                text-align: left;
                outline: none;
                font-size: 15px !important;
                font-weight : bold !important;
                padding : 12px 6px !important
                }
                .content {
                padding: 0 18px;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.2s ease-out;
                font-size : 18x;
                text-align : left;
                }
                .textHead{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 23px;
                }
                .labelofTable{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 16px;
                }
                .taxText{
                color : rgba(26,39,69,255);
                font-family: ProximaNovaAlt-Medium;
                font-size : 17px;
                text-align : left;
                font-weight : 100;
                }
                .centerText{
                color : #61cf73;
                font-family: ProximaNovaAlt-Medium;
                font-size : 18px;
                }
                #sig-canvasSec{
                width: 100%;
                height: auto;
                border: 1px solid blue;
                cursor: crosshair;
                }
                
                <!--SIGNATURE -->
                
                .signature-component {
                text-align: left;
                display: inline-block;
                width : 100%;   
                max-width: 100%;
                }
                .signature-component canvas {
                display: block;
                position: relative;
                border: 1px solid; 
                }
                
                
                
                .signature-component-sec {
                text-align: left;
                display: inline-block;
                width : 100%;   
                max-width: 100%;
                }
                .signature-component-sec canvas {
                display: block;
                position: relative;
                border: 1px solid; 
                }
                
                <!--SIGNATURE-->
                
                
                .imagevideo img{
                margin-top : 10px;
                }
                
                
                <!--Errors Pages-->
                .ButtonStyle1 button{ 
                width : 100%;
                height: 65px;
                font-size: 17px;
                font-weight : 600;
                background : transparent;
                color : #0176d3;
                border : 2px solid #0176d3;
                border-radius : 7px;
                }
                .ButtonStyle2 button{
                background : #45c65a;
                border : none;
                color : #ffffff;
                width : 100%;
                height: 65px;
                font-size: 17px;
                font-weight : 600;
                border-radius : 7px;
                }
                .thirdBtn button{
                background: white;
                border-color: DodgerBlue;
                color: DodgerBlue;
                margin-bottom: 15px;
                border-radius: 5px;
                font-size: 17px;
                font-weight: bold;
                width : 100%;
                height: 64px;
                outline : none;
                }                            
                .logoforEror{
                background-color: #1a2745;
                color: #fff;
                align-items: center;
                width : 100%;
                height : 50px;
                }
                .logoforEror img{
                width: 190px;
                padding: 15px 22px;
                height: 27px;
                }
                <!--Errors Pages-->
            </style>
        </head>
        <body onload="defaultHIde()" id="dataBody" >
            <apex:form id="frm" style="display : {!If(redirectToError == false, 'Block', 'none')}">
                <div id="spin">
                    <div id="spinner" class="slds-spinner_container slds-is-relative" style="position : fixed;">
                        <div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand">
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                </div>
                <apex:actionFunction name="updateStages" action="{!updateVOIStages}" reRender="none">
                    <apex:param name="stage" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="mailSendToUs" action="{!SendMailtoUs}" reRender="none" oncomplete="stopSpinner();"/>
                <apex:actionFunction name="jsActionFunction" action="{!securecode}" reRender="none">
                    <apex:param name="vfParam" value="" assignTo="{!SecureCodeOriginal}" />
                </apex:actionFunction>
                <apex:actionFunction name="SentFrontDLData" action="{!FrontDlData}" oncomplete="startCameraForBackDL();" reRender="none">
                    <apex:param name="imageDeta" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="SentBackDLData" action="{!BackDlData}" reRender="none">
                    <apex:param name="imageDetaBack" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="sendVideo" action="{!videoDataforClass}" oncomplete="StopSpin();">
                    <apex:param name="videoData" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="SendSign2Data" action="{!Sign2DataforClass}" reRender="none" oncomplete="finishSignature();">
                    <apex:param name="sign2" value="" />
                </apex:actionFunction>
                <apex:actionFunction name="SendSign1Data" action="{!Sign1DataforClass}" reRender="none">
                    <apex:param name="sign1" value="" />
                </apex:actionFunction>
                <apex:actionFunction name="OtherSign" action="{!Sign1DataforClass}" reRender="none" oncomplete="finishSignature();">
                    <apex:param name="sign1" value="" />
                </apex:actionFunction>
                <apex:actionFunction name="GeneratePDF" action="{!insertPdf}" oncomplete="stopSpinner();" reRender="none">
                    <apex:param name="a" value=""/>
                </apex:actionFunction>
                <!--<apex:actionFunction name="sendEmail" action="{!sendEmail}"  reRender="none"/>-->
                <apex:actionFunction name="sApp" action="{!updateCont}" reRender="none">
                    <apex:param name="numberOfAppToSign" value=""/>
                    <apex:param name="TaxResident" value=""/>
                    <apex:param name="TaxFN" value=""/>
                    <apex:param name="tinNM" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="updateOppStatus" action="{!updateopportunityStatus}" reRender="none">
                </apex:actionFunction>
                <apex:actionFunction name="finishVOI" action="{!finishVOI}" reRender="none">
                </apex:actionFunction>
                <apex:actionFunction name="addLog" action="{!generateLog}" reRender="none">
                    <apex:param name="startTime" value=""/>
                    <apex:param name="endTime" value=""/>
                    <apex:param name="message" value=""/>
                </apex:actionFunction>
                <apex:actionFunction name="sendVideoSS" action="{!videoSS}" reRender="none">
                    <apex:param name="Video_SS" value=""/>
                </apex:actionFunction>
                
                <div class="card1" id="pb1">
                    <article class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__figure logo" align="center">
                                    <span><img src="{!$Resource.New_PL_Logo}" /></span>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div id="firstText">
                                <div>
                                    <center><img src="{!$Resource.VOI_Fron_Icons+'/PhotographID.png'}" class="sfLogo" style="margin-top : 12px;"/></center>
                                </div><br/>
                                <h1 class="Head1">
                                    <center><b>Upload your ID</b></center>
                                </h1>
                                <div style="height : 90px">
                                    <div class="text1" style="margin-top : 10px;">
                                        <center><p>In order to complete your application we <br/>need to be 100% sure that you are you.<br/>This take about 60 seconds.</p>   </center> 
                                    </div><br/>
                                </div>
                            </div>
                            <div id="SecondText">
                                <div>
                                    <center><img src="{!$Resource.VOI_Fron_Icons+'/RecordVideo.png'}" class="sfLogo" style="margin-top : 12px;"/></center>
                                </div><br/>
                                <h1 class="Head1">
                                    <center><b>Verify it's you</b></center>
                                </h1>
                                <div style="height : 100px">
                                    <h1 class="DoneText">
                                        <center><b>Step 1 done!</b></center>
                                    </h1>
                                    <div class="text1">
                                        <center><p>Now let's verify it's you by taking a<br/>secure 5 second clip.</p></center> 
                                    </div><br/>
                                </div>
                            </div>
                            
                            <div id="ThirdText">
                                <div>
                                    <center><img src="{!$Resource.VOI_Fron_Icons+'/eSignature.png'}" class="sfLogo" style="margin-top : 12px;"/></center>
                                </div><br/>
                                <h1 class="Head1">
                                    <center><b>e-sign docs</b></center>
                                </h1>
                                <h1 class="DoneText">
                                    <center><b>Step 2 done!</b></center>
                                </h1>
                                <div class="text1">
                                    <center><p>Lastly, read and sign the privacy and<br/>application docs.</p></center> 
                                </div><br/>
                            </div>
                            
                            <div id="FourthText">
                                <div>
                                    <center><img src="{!$Resource.VOI_Fron_Icons+'/final.png'}" style="height:122px !important;width:122px;"/></center>
                                </div><br/>
                                <h1 class="Head1">
                                    <center><b>Congratulations!</b></center>
                                </h1>
                                <div style="height : 100px">
                                    <h1 class="DoneText">
                                        <center><b>We'll be back to you shortly.</b></center>
                                    </h1>
                                    <div class="text1">
                                        <center><p>A copy of the document have been <br/>emailed to you.</p></center> 
                                    </div><br/>
                                </div>
                            </div>
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="slds-box box1" style="border-radius : 6px" onclick="checkIsEnableFirst();">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12" align="left">
                                            <span class="fron-Icon"><img src="{!$Resource.Front_Panle_Icons + '/photo.png'}" style="height:33px; width : 52px"/></span>
                                        </div>
                                        <div class="slds-col slds-size_6-of-12" align="left">
                                            <span class="step1" align="center">STEP 1</span><br/>
                                            <span class="photoid"><b>Photo ID</b></span>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12" align="center">
                                            <div id="icon1">
                                                <span class="icon1"><img src="{!$Resource.VOI_Icons + '/grey.png'}" /></span>       
                                            </div>
                                            <div id="icon2">
                                                <span class="icon2" ><img src="{!$Resource.VOI_Icons + '/orangecircle.png'}" /></span>    
                                            </div>
                                            <div id="icon3">
                                                <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                            </div>
                                            <div id="icon4">
                                                <span><img src="{!$Resource.VOI_Icons + '/cross.png'}" style="width : 35px;"/></span>        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Panel 2 start-->
                                <div class="slds-box box2" style="border-radius : 6px" onclick="checkIsEnableSec();">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12" align="left">
                                            <span><img src="{!$Resource.Front_Panle_Icons + '/video.png'}" style="height:45px; width : 57px"/></span>
                                        </div>
                                        <div class="slds-col slds-size_6-of-12" align="left">
                                            <span class="step1" align="center">STEP 2</span><br/>
                                            <span class="photoid"><b>Take a clip</b></span>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12" align="center">
                                            <div id="icon1-1">
                                                <span class="icon1"><img src="{!$Resource.VOI_Icons + '/grey.png'}" /></span>       
                                            </div>
                                            <div id="icon1-2">
                                                <span class="icon2" ><img src="{!$Resource.VOI_Icons + '/orangecircle.png'}" /></span>    
                                            </div>
                                            <div id="icon1-3">
                                                <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                            </div>
                                            <div id="icon1-4">
                                                <span><img src="{!$Resource.VOI_Icons + '/cross.png'}" style="width : 35px;"/></span>        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Panel 3 start-->
                                <div class="slds-box box3" style="border-radius : 6px" onclick="checkIsEnableThird();">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12" align="left">
                                            <span class="fron-Icon"><img src="{!$Resource.Front_Panle_Icons + '/sign.png'}" style="height:38px; width : 56px"/></span>
                                        </div>
                                        <div class="slds-col slds-size_6-of-12" align="left">
                                            <span class="step1" align="center">STEP 3</span><br/>
                                            <span class="photoid"><b>e-sign docs</b></span>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12" align="center">
                                            <div id="icon2-1">
                                                <span class="icon1"><img src="{!$Resource.VOI_Icons + '/grey.png'}" /></span>       
                                            </div>
                                            <div id="icon2-2">
                                                <span class="icon2" ><img src="{!$Resource.VOI_Icons + '/orangecircle.png'}" /></span>    
                                            </div>
                                            <div id="icon2-3">
                                                <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                            </div>
                                            <div id="icon2-4">
                                                <span><img src="{!$Resource.VOI_Icons + '/cross.png'}" style="width : 35px;"/></span>        
                                            </div>
                                        </div>
                                    </div>
                                </div><br/>
                                <!--Button-->
                                <div id="launchBtn">
                                    <div class="launchbtn">
                                        <button type="button" onclick="startCameraForFrontDL()">BEGIN</button>
                                    </div><br/> 
                                </div>
                                <div id="nextBtn">
                                    <div class="launchbtn">
                                        <button type="button" onclick="onVideoSec()">Next</button>
                                    </div><br/>
                                </div>
                                <div id="ReadSignBtn">
                                    <div class="launchbtn">
                                        <button type="button" onclick="ReadANDSign()">ACCEPT AND SIGN</button>
                                    </div><br/>
                                    <div>
                                        <!--<a href="" onclick="RejectDoc()">Reject Document</a>-->
                                    </div>
                                </div>
                                <div id="FinishBtn">
                                    <div class="launchbtn">
                                        <a href="https://www.parkerlane.com.au/"><button type="button">Finish</button></a>
                                    </div><br/>
                                </div>
                                <!--anchor start-->
                                <div id="firstAnchor">
                                    <div class="anchor">
                                        <a href="#"><u>Why is this needed?</u></a>
                                    </div>    
                                </div>
                                <div id="2ndAnchor">
                                    <div class="anchor" >
                                        <a href="#"><u>Speak to someone</u></a>
                                    </div>   
                                </div>
                                
                            </div>
                        </div>
                    </article>
                </div>
                <!--Card 2 Start-->
                <!--DL FRONT SECTION STARTS-->
                <!--Card 2 Start-->
                <div class="card2" id="pb2">
                    <article class="slds-card">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="videoDiv">
                                <center><video id="videoFrontDL"></video></center>    
                            </div>
                            
                        </header>
                        <div class="slds-card__body slds-card__body_inner" style="padding-right : 0px !important; padding-left : 0px !important;">
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="cameraP">
                                    <center><p>Take a picture of the FRONT of your ID</p></center>
                                </div><br/>
                                <div align="center" style="margin-top : 12px;">
                                    <div class="capture-Btn">
                                        <button type="button" id="Click-Photo" onclick="stopCameraForFrontDL()"></button> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <!--Card 3 Start-->
                <div class="card2" id="pb3">
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">
                            <h1 class="Head1">
                                <center><b>Check your ID</b></center>
                            </h1><br/>
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="corner">
                                    <center><canvas id="canvasForFrontDL"></canvas></center>
                                </div><br/>
                                
                                <div class="cameraP">
                                    <center><p>Is the FRONT of your ID in focus?</p></center>
                                </div><br/><br/>
                            </div>
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col slds-size_3-of-6 takeagain">
                                    <button type="button" onclick="takeAgainForFrontDL()">Take Again</button>
                                </div>
                                <div class="slds-col slds-size_3-of-6 confirm">
                                    <button type="button" onclick="confirmForFrontDL()">Yes</button>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <!--DL FRONT SECTION ENDS -->
                    
                <!--DL BACK SECTION STARTS-->
                <div class="card2" id="pb2A">
                    <article class="slds-card">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="videoDiv">
                                <center><video id="videoBackDL"></video></center>    
                            </div>
                            
                        </header>
                        <div class="slds-card__body slds-card__body_inner" style="padding-right : 0px !important; padding-left : 0px !important;">
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="cameraP">
                                    <center><p>Now, take a picture of the BACK of your ID</p></center>
                                </div><br/>
                                <div align="center" style="margin-top : 12px;">
                                    <div class="capture-Btn">
                                        <button type="button" id="Click-Photo" onclick="stopCameraForBackDL()"></button> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <!--Card 3 Start-->
                <div class="card2" id="pb3A">
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">
                            <h1 class="Head1">
                                <center><b>Check your ID</b></center>
                            </h1><br/>
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="corner">
                                    <center><canvas id="canvasForBackDL"></canvas></center>
                                </div><br/>
                                
                                <div class="cameraP">
                                    <center><p>Is the BACK of your ID in focus?</p></center>
                                </div><br/><br/>
                            </div>
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col slds-size_3-of-6 takeagain">
                                    <button type="button" onclick="takeAgainForbackDL()">Take Again</button>
                                </div>
                                <div class="slds-col slds-size_3-of-6 confirm">
                                    <button type="button" onclick="confirmForBackDL()">Yes</button>
                                </div><br/><br/>
                            </div>
                        </div>
                    </article>
                </div>
                <!--DL BACK SECTION ENDS-->
                
                <!--ViDEO RECORDING STARTS-->
                <!--FRONT PAGE-->
                
                <div id="Vid1">
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">
                            <br/><br/>
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="imagevideo">
                                    <br/><center><img src="{!$Resource.VOI_Fron_Icons+'/RecordVideo.png'}" class="VsfLogo"/></center>
                                </div><br/><br/><br/><br/>
                                <!--Not Responsive-->
                                <div class="dicsripction">
                                    <span>&nbsp;&nbsp;To verify it's you follow these three steps:</span><br/>
                                    <div class="orderList">
                                        <ol class="slds-list_ordered">
                                            <li style="margin-top : 15px;">Click <b style="font-size : 16px">YES</b> to enable access to camera</li>
                                            <li style="margin-top : 15px">Hold the phone up to your face then click <b style="font-size : 16px; font-weight : 700;">START</b> to begin the 3 second recording</li>
                                            <li style="margin-top : 15px">Speak the 4 digit <b style="font-size : 16px">SECURE CODE</b> clearly into the video</li>
                                        </ol>
                                    </div>
                                </div><br/><br/><br/><br/><br/>
                                <!--Not Responsive-->
                                <div class="launchFrontcam">
                                    <button type="button" onclick="startVideCam()">LAUNCH FRONT CAMERA</button>  
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                
                <!--VIDEO RECORDING SECTION-->
                
                <div id="Vid2">
                    <article class="slds-card">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            
                        </header>
                        <div class="slds-card__body slds-card__body_inner">
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div align="center" style="margin-top : 22px;">
                                    <div class="videoRecDiv" align="center">
                                        <video id="videoRec" muted="true" ></video>
                                    </div>    
                                </div>
                                <div id="videoRecText" class="slds-text-align_center slds-m-horizontal_large slds-m-top_large">
                                    <p>Click <b style="font-size : 16px !important; font-weight: 800 !important">START</b> then speak the 4-digit secure code into the phone</p>
                                </div><br/>
                                <div class="securityCode">
                                    <div class="slds-box" style="padding : 5px !important; background : #E8E8E8 !important; border-radius : none !important;">
                                        <center class="secureText"><b>SECURE CODE</b></center>
                                        <center id="random"></center>
                                    </div>
                                </div>
                                <div id="startTest"> 
                                    <div class="box" id="box" >
                                        <div class="main">
                                            <canvas id="Circle_button" width="100px" height="100px"></canvas>
                                            <button type="button" class="videRecButton slds-button slds-button_success" onclick="startRecording(),StartRecButton()" id="circlebtn" style="border-radius : 50%; background : green;">START</button>    
                                        </div>
                                    </div>
                                </div>
                                <div id="videoRecText" style="font-size : 14px;">
                                    <span><center>The recording with automatically<br/> stop after 3 seconds</center></span>                                
                                </div>
                            </div>
                        </div>
                    </article>
                </div> 
                
                <!--VIDEO RECORDING SECTION-->
                
                <!--VIDEO RECORDING PREVIEW SECTION-->
                <div id="Vid3">
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">                           
                            <h1 class="vHead1">
                                <center><b>Check your clip</b></center>
                            </h1><br/>
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="rercordedVid">
                                    <video id="preview" autoplay="true"></video>
                                </div><br/>
                                <div class="vide2Text">
                                    <h1><center><b>Is the secure code audible?</b></center></h1>
                                </div>
                                <div class="video2text2">
                                    <span><center>(check that your volume is up if<br/> you can't hear yourself)</center></span>
                                </div>
                                <br/><br/>
                                <div class="slds-grid slds-gutters">
                                    <div class="slds-col slds-size_3-of-6 takeagain">
                                        <button type="button" onclick="videoTakeAgain()" id="take">Take Again</button>
                                    </div>
                                    <div class="slds-col slds-size_3-of-6 confirm">
                                        <button type="button" onclick="videoconfirm(); return false;">Yes</button>
                                    </div><br/>
                                </div><br/>
                                <div class="anchor">
                                    <a href="#"><u>I need help with this</u></a>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                <!--VIDEO RECORDING PREVIEW SECTION-->
                
                <!--FRONT PAGE-->
                <!--ViDEO RECORDING ENDS-->
                
                <!--READ AND SIGN SECTION STARTS-->
                
                <!--SECTION ONE-->
                <div>
                    <apex:pageBlock id="pbreadsign">
                    <div id="ReadSign1">
                        <article class="slds-card">
                            <div class="slds-card__body slds-card__body_inner">
                                <br/>
                                <h1 class="vHead1">
                                    <p><b>Parker Lane</b></p>
                                    <Span><b>Application Documents</b></Span>
                                    <p>(1 of {!if(opportunity.Lender__c == 'Transport Mutual Credit Union', '2', '1')} documents)</p>
                                </h1><br/><br/>
                                <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                    <div style="color : blue; font-size : 16px; text-align : left !important">
                                        <span><b>You will receive a copy of the completed <br/>document via email.</b></span>    
                                    </div>
                                    <br/><br/>
                                    <div class="ReadListDoc">
                                        <span>How to use this document.</span><br/><br/>
                                        <div class="orderList">
                                            <ol class="slds-list_ordered">
                                                <li>Read this document carefully.</li>
                                                <li>Click on any blue text to expand the section.</li>
                                                <li>When ready, scroll the to bottom and sign with your finger.</li>
                                            </ol>
                                        </div>
                                    </div><br/><br/>
                                    <div class="creditAPP">
                                        <h1>REVIEW YOUR DETAILS</h1>
                                    </div>
                                    <div class="ReadListDoc">
                                        <p>By signing this document you acknowledge that you  have reviewed the information entered in the application form and certify that the information is true and complete. You can access your application details by <a onclick="window.open('https://findev-apply-parkerlane.cs5.force.com/?id={!opportunity.id}')">clicking here.</a></p>
                                    </div><br/>
                                    <div class="creditAPP">
                                        <h1>CREDIT APPLICATION</h1>
                                    </div>
                                    <div class="ReadListDoc">
                                        <p>You have selected to apply for the following loan product.</p>
                                    </div><br/><br/>
                                </div>
                                <div class="slds-text-align_left slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                    <apex:pageBlockSection >
                                        <div class="oppData"> 
                                            <table>
                                                <tr>
                                                    <td><b>Applicant(s): </b>{!opportunity.Applicant_1__r.Name}{!secApplicantName}</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Address: </b>{!opportunity.Applicant_1__r.Residential_Address__pc}</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Credit provider: </b>{!Quote.Lender__c}</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Product: </b>{!Quote.Product__r.Name}</td>
                                                </tr>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>loan Amount: </b><apex:param value="{!IF( TEXT(Quote.Total_loan_amount__c) != '', Quote.Total_loan_amount__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                                <tr>
                                                    <td><b>Interest Rate: </b>{!Quote.Interest_Rate__c}%</td>                                          
                                                </tr>
                                                <tr>
                                                    <td><b>Rate Type: </b>{!Quote.Product__r.Interest_Rate_Type__c}</td>                                          
                                                </tr>
                                                <tr>
                                                    <td><b>Repayment type: </b>{!Quote.Product__r.Repayment_Type__c}</td>                                          
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <b>Repayments: </b>{!Mrepayment}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td><b>Loan Term: </b>{!Quote.Loan_Term__c} months</td>                                           
                                                </tr>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>Total set-up costs: </b><apex:param value="{!IF( TEXT(Quote.Total_Setup_Fees__c) != '', Quote.Total_Setup_Fees__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <b>Ongoing fees: </b>{!AccKepoping}
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>Total cost of loan: </b><apex:param value="{!IF( TEXT(Quote.Total_Loan_Cost__c) != '', Quote.Total_Loan_Cost__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                            </table><br/>
                                            <div class="Disclaimer">
                                                <p>Note: If you repay the loan sooner, the total loan cost will also be less due to saved interest and fees. </p>
                                            </div><br/><br/>
                                            <div class="ReadListDoc">
                                                <p><i>Disclaimer: The above figures were current at the time this Credit Proposal Disclosure was issued.</i></p>
                                            </div><br/><br/>
                                            <div>
                                                <span><b>Net funds available</b></span>
                                            </div><br/>
                                            <table>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>Loan amount: </b><apex:param value="{!IF( TEXT(Quote.Total_loan_amount__c) != '', Quote.Total_loan_amount__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                                <tr>
                                                    <td><b>LESS: </b></td>
                                                </tr>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>Setup Fees: </b><apex:param value="{!IF( TEXT(Quote.Up_Front_Fees__c) != '', Quote.Up_Front_Fees__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>Brokerage: </b><apex:param value="{!IF( TEXT(Quote.Brokerage_Amount__c) != '', Quote.Brokerage_Amount__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                                <tr>
                                                    <apex:outputText value="{0, number, currency}">
                                                        <b>Credit Available: </b><apex:param value="{!IF( TEXT(Quote.Customer_Amount__c) != '', Quote.Customer_Amount__c, 0)}"/>
                                                    </apex:outputText>
                                                </tr>
                                            </table><br/>
                                            <div class="Disclaimer">
                                                <p>Please read the following sections carefully.</p>
                                            </div><br/>
                                            <div class="colapseSec">
                                                <div id="btn8">
                                                    <button type="button" class="collapsible" >About us<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <p>Parker Lane is a trading name of Upside Downside Pty Ltd. Upside Downside Pty Ltd is licensed under the National Consumer Credit Protection Act 2009. Our details are as follows:</p>
                                                        <p>Phone : 1300 13 17 11</p>
                                                        <p>Registered Address: 24 The Avenue Linley Point NSW 2066</p>
                                                        <p>Australian Credit License Number: 482276<br/>Parker Lane is a registered trademark.</p><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn1">
                                                    <button type="button" class="collapsible" >About this document<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <p>This document outlines the information provided by you about your needs and requirements together with the product recommendation(s) made in finding a loan solution which meets your goals.</p><br/>
                                                        <p>In preparing this credit proposal we have relied on the information that you have given to us. If you believe any aspect of your situation has been overlooked or is not correctly represented, please notify us immediately before proceeding.</p><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn2">
                                                    <button type="button" class="collapsible">Product Recommendation<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <p>You required a loan for {!Quote.Purpose__c} for the amount of {!totalLoanamnt}. You prefer to repay the loan via {!opportunity.Preferred_repayment_frequency__c} instalments over a term of {!Quote.Loan_Term__c} months.</p><br/>
                                                        <p>We recommended three product options which suit your requirements. These products were selected because they offer low rate options for the purpose you are seeking; they suit a  range of borrowers; they offer flexible loan terms; and they include features like flexible repayment options, free additional repayments, and no early repayment penalties.</p><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn3">
                                                    <button type="button" class="collapsible">Fees, Charges &amp; Commission<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <p><b>Estimate of amount payable by the lender to us on your behalf</b></p><br/>
                                                        <table>
                                                            <tr>
                                                                <apex:outputText value="{0, number, currency}">
                                                                    <b>Brokerage: </b><apex:param value="{!IF( TEXT(Quote.Brokerage_Amount__c) != '', Quote.Brokerage_Amount__c, 0)}"/>
                                                                </apex:outputText>
                                                            </tr>
                                                        </table><br/>
                                                        <p>This amount will be paid by the lender to us from loan proceeds. </p><br/>
                                                        <p><b>Estimate of amount payable to the lender</b></p><br/>
                                                        <div>
                                                            <table>
                                                                <tr>
                                                                    <apex:outputText value="{0, number, currency}">
                                                                        <b>Application Fee: </b><apex:param value="{!IF( TEXT(Quote.Up_Front_Fees__c) != '', Quote.Up_Front_Fees__c, 0)}"/>
                                                                    </apex:outputText>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                        <div>
                                                            <table>
                                                                <tr>
                                                                    <td><b>Account Keeping: </b>Up to {!Amount}</td>
                                                                </tr>
                                                            </table>
                                                            <p>(over the life of the loan. Note that if you repay early, you will only pay the monthly fees applicable up to that point)</p>
                                                        </div><br/>
                                                        <p><b>Estimate of the total commission paid by the lender to us</b></p>
                                                        <div>
                                                            <table>
                                                                <tr>
                                                                    <apex:outputText value="{0, number, currency}">
                                                                        <b>Commission: </b><apex:param value="{!IF( TEXT(Quote.Commission_Amount__c) != '', Quote.Commission_Amount__c, 0)}"/>
                                                                    </apex:outputText>
                                                                </tr>
                                                            </table>
                                                        </div><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn4">
                                                    <button type="button" class="collapsible">Risk &amp; Offer of Insurance<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <p>Insurance can be an effective way of minimising any potential financial hardship on you, your family and your business. Financial hardship may result from a death, disability, trauma or personal injury.</p><br/>
                                                        <p>If you do not have adequate risk protection insurance in place:</p><br/>
                                                        <ul class="slds-list_dotted">
                                                            <li>You may not be able to meet the repayments on your loan should an unexpected or unforeseen event arise; or</li>
                                                            <li>Your savings may not be sufficient to meet your financial obligations. </li>
                                                        </ul><br/>
                                                        <p>You acknowledge that you may be at risk if you do not take out adequate risk protection insurance.</p><br/>
                                                        <p>You acknowledge that Parker Lane does not offer risk insurance for the type of credit being applied for.</p><br/>
                                                        <p><b><i>You are aware that there is no obligation to apply for risk insurance as a condition of the loan.</i></b></p><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn5">
                                                    <button type="button" class="collapsible">Credit Quote &amp; Propsal<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <span style="font-size : 20px"><b>Credit Quote Terms</b></span><br/>
                                                        <span>This document provides information on the maximum amount of fees and charges payable by you in relation tocredit assistance and services we provide to you.</span><br/>
                                                        <span>We provide credit assistance by:</span>
                                                        <ul class="slds-list_dotted">
                                                            <li>supplying you with information in relation to a loan,</li>
                                                            <li>recommending a loan that is suitable for your current objectives and financial situation,</li>
                                                            <li>assisting you with a loan application, and</li>
                                                            <li>liaising with lenders on your behalf.</li>
                                                        </ul><br/><br/>
                                                        <span>TOTAL AMOUNT PAYABLE: $Nil (GST inclusive) is made up of:</span>
                                                        <ul class="slds-list_dotted">
                                                            <li>Commitment Fee: Nil</li>
                                                            <li>Service Fee: Nil</li>
                                                        </ul><br/><br/>
                                                        <span>BROKERAGE: In the provision of products and services we may charge a brokerage fee which is paid by you to thelender who in turn pays us. Refer to the Schedule above for amounts.</span><br/><br/>
                                                        <span>Note: a copy of the signed Credit Quote will be provided for your records.</span><br/><br/>
                                                        <p><b>Credit Proposal Terms</b></p>
                                                        <p>General Terms &amp; Conditions<br/> This Credit Proposal outlines the information provided by you about your needs and requirements together with the product recommendation(s) made in finding a loan solution which meets your goals.</p>
                                                        <p>In preparing this credit proposal we have relied on the information that you have given to us. If you believe any aspect of your situation has been overlooked or is not correctly represented, please notify us immediately before proceeding.
                                                            This proposal may only be considered current as at the date of this document. The proposal can be altered if relevant factors including interest rates, fees or your specific requirements and objectives change, subject to the ability to meet any contractual settlement obligations. This proposal does not constitute or contain taxation or financial planning advice.</p><br/>
                                                        <p><b>Net Funds Available</b></p>
                                                        <p>The net amount available from the draw-down of your asset finance / personal loan facility does not necessarily represent the amount of funds that will be available to you. Other associated fees and charges may be disbursed from the loan</p><br/>
                                                        <p><b>Fees &amp; Charges</b></p>
                                                        <p>Fee estimates are rounded to the nearest dollar. The final amount of fees and charges will be shown within the credit contract which will be issued by the lender. Some or all of these fees and charges may be payable from the loan proceeds and do not include any ongoing charges.</p><br/>
                                                        <p><b>Commission</b></p>
                                                        <p>The commission to be paid by the lender will be disbursed between our aggregator or directly to us and any business referrer (if applicable). 
                                                            A Volume Bonus of 0% to 5% may also be Payable to Upside Downside Pty Ltd Depending on type of finance, total volume introduced and performance benchmarks. </p>
                                                        <p>From time to time, Upside Downside Pty Ltd and its employees may receive a non-commission benefit by way of training, professional development, entertainment, gift, conference attendance, sponsorship, or entry into a competition run by a lender or my aggregator, at no extra cost to you. The nature of such arrangements are temporary, and the occurrence and amounts are often not readily ascertainable, however if they are apparent as a result of assisting you with credit assistance, this will be disclosed to you. </p>
                                                        <p>As disclosed in our Credit Guide, we and/or our employees have a preferential relationship with this lender. This preferential program gives you, as our customer access to preferential services. This does not include any additional commission paid to us nor customer discounts.</p><br/>
                                                        <p><b>Referral Fees </b></p>
                                                        <p>If you were introduced or referred by one of our referrers, we will be paying a referral fee of up to 20% of the income we receive from this application. This fee is not paid by you. 
                                                            Acknowledgement of risk insurance offering 
                                                            Note: a copy of the signed Credit Proposal Disclosure and Credit Quote will be provided for your records.</p><br/><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn8">
                                                    <button type="button" class="collapsible">Credit Guide<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                                    <div class="content">
                                                        <p><b>Your best interests</b></p>
                                                        <p>Our brokers priority is to you, their customer. We require our brokers place your finance needs above those of anyone else.</p>
                                                        <p>Our brokers are required to be transparent about products, your options, applicable fees, and charges as well any conflicts of interest. They will communicate in simple to understand language and act with the highest standards of integrity. They are committed to ensuring the product selected will meet your needs, requirements and be in your best interests at the time of assisting you obtaining finance.</p><br/>
                                                        <p><b>Preliminary Assessment</b></p>
                                                        <p>Prior to providing credit assistance to you, we must assess whether the particular loan is unsuitable. A loan will be unsuitable based on the information you provide to us if:</p>
                                                        <ol class="slds-list_ordered">
                                                            <li>You will be unable to repay the proposed loan or will only be able to repay the proposed loan with substantial hardship; or</li>
                                                            <li>The proposed loan does not meet your requirements and objectives.</li>
                                                        </ol>
                                                        <p>We are required to document our findings that the proposed loan is not unsuitable by way of completing a Preliminary Assessment. The Preliminary Assessment will set out your:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>requirements and objectives:</li>
                                                            <li>financial and relevant personal situation; and</li>
                                                            <li>ability to repay the proposed loan repayments.</li>
                                                        </ul>
                                                        <p>We are also required to take reasonable steps to verify information provided by you to us.This verification may include:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>requesting you for copies of documents that demonstrate your financial situation - in some cases we may also need to sight original documents; and</li>
                                                            <li>contacting third parties to assist in verifying the information that you provide.</li>
                                                        </ul><br/>
                                                        <p><b>Obtaining a copy of the Preliminary Assessment</b></p>
                                                        <p>If we provide you with credit assistance, you may request a copy of our Preliminary Assessment anytime for up to 7 years and we must provide you with a copy of the assessment within the following timeframes:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>Your request is made before the Credit Day*: As soon as possible afer we receive your request.</li>
                                                            <li>Up to 2 years after the Credit Day: Within 7 business days after we receive your request</li>
                                                            <li>Between 2 to 7 years after the Credit Day: Within 21 business days after we receive your request</li>
                                                        </ul>
                                                        <p>*The Credit Day is the date the credit contract (i.e. the loan) is settled or the loan amount is increased.</p>
                                                        <p>There is no charge for requesting or receiving a copy of the Preliminary Assessment.</p><br/>
                                                        <p><b>Our aggregator</b></p>
                                                        <p>We have approval to utilise credit providers and their lending products through the services of our aggregator Connective Broker Services Pty Ltd ABN 77 161 731 111, Credit Representative 437202 authorised under Australian Credit Licence 389328. The aggregator charges us a fee depending on our contract arrangements, consisting of:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>a share of commission that is paid by the particular credit provider</li>
                                                            <li>a membership fee for our business</li>
                                                            <li>a monthly fee for each of our accredited loan writers</li>
                                                        </ul>
                                                        <p>We have access to a panel of lenders through Connective. Macquarie Bank Limited is a 25% shareholder of Connective. We have access to products including those from Macquarie Bank Limited.</p>
                                                        <p>Commissions paid by Connectives lender panel are transparent and do not influence the broker or consumer choice. Connective is committed to quality consumer outcomes in all circumstances.</p><br/>
                                                        <p><b>Referrers and referral fees</b></p>
                                                        <p>We obtain referrals from a range of sources, including accountants, financial planners, real estate agents and other people. If you were introduced or referred to us, we may pay the referrer a commission or a fee. etails of any commission or fees being paid to the referrer will be included in the Summary of Requirements and Credit Proposal document.</p><br/>
                                                        <p><b>Fees and charges that are payable by you in relation to our credit assistance</b></p>
                                                        <p>We may charge a fee for providing credit assistance to you. If applicable, details about those fees payable by you will be set out in a Credit Quote which we will give you prior to submitting your loan application.</p>
                                                        <p>Other fees and charges</p>
                                                        <p>You may have to pay other fees and charges (such as application fees, valuation costs and other applicable fees) to the lender or other parties. You should review the particular loan contract documentation for further details of any such fees and charges.</p><br/>
                                                        <p><b>How do we get paid?</b></p>
                                                        <p>We receive a commission and/or brokerage fee from lenders when your loan is settled. The commission is paid to us either directly by the lenders or paid to us via our aggregator.
                                                            The amount paid is based on both the total amount financed and the particular loan product you have selected. We may receive the following commissions after your loan has settled.
                                                        </p><br/>
                                                        <p><b>Commission or Brokerage Fee</b></p>
                                                        <p>(Paid after settlement)</p>
                                                        <p>Ranging from a minimum 0% to a maximum of 8% depending on the type of credit contract and calculated on the total loan amount financed including GST.</p>
                                                        <p>The method of calculation is based on the net amount financed including GST. Details of commission and/or brokerage to be received will be included in the Summary of Requirements and Credit Proposal document that we will provide you with when credit assistance is provided.</p>
                                                        <p>From time to time, I may receive a non-commission benefit by way of training, professional development, entertainment, gift, conference attendance, sponsorship, or entry into a competition run by a lender or my aggregator, at no extra cost to you. The nature of such arrangements are temporary, and the occurrence and amounts are often not readily ascertainable, however if they are apparent as a result of assisting you with credit assistance, this will be disclosed to you.</p><br/>
                                                        <p><b>Our lender panel</b></p>
                                                        <p>We are authorised to engage in credit activities and therefore provide assistance to obtain consumer asset finance and personal loans for you from a panel of credit providers. The following are the credit providers through which we generally conduct the most business:</p><br/>
                                                        <p><b>Consumer Asset Finance</b></p>
                                                        <ul class="slds-list_dotted">
                                                            <li>Australian Motorcycle &amp; Marine Finance</li>
                                                            <li>Automotive Financial Services</li>
                                                            <li>Branded Financial Services</li>
                                                            <li>Community First</li>
                                                            <li>Finance One</li>
                                                            <li>Firstmac</li>
                                                            <li>Latitude Financial</li>
                                                            <li>Macquarie</li>
                                                            <li>Money3</li>
                                                            <li>Pepper MoneyPepper Money</li>
                                                            <li>Plenti</li>
                                                            <li>Resimac</li>
                                                            <li>Transport Mutual</li>
                                                            <li>Wisr</li>
                                                        </ul><br/>
                                                        <p><b>Personal Loans</b></p>
                                                        <ul class="slds-list_dotted">
                                                            <li>ANZ Banking Group</li>
                                                            <li>Community First</li>
                                                            <li>Latitude Financia</li>
                                                            <li>Money3</li>
                                                            <li>NOW Finance</li>
                                                            <li>Pepper Money</li>
                                                            <li>Plenti</li>
                                                            <li>Transport Mutual</li>
                                                            <li>Wisr</li>
                                                        </ul><br/>
                                                        
                                                        <p><b>Other people we deal with</b></p><br/>
                                                        <p><b>Our aggregator</b></p>
                                                        <p>We have approval to utilise credit providers and their lending products through the services of our aggregator Connective Broker Services Pty Ltd ABN 77 161 731 111, Credit Representative 437202 authorised under Australian Credit Licence 389328. The aggregator charges us a fee depending on our contract arrangements, consisting of:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>a share of commission that is paid by the particular credit provider</li>
                                                            <li>a membership fee for our business</li>
                                                            <li>a monthly fee for each of our accredited loan writers.</li>
                                                        </ul>
                                                        <p>We have access to a panel of lenders through Connective. Macquarie Bank Limited is a 25% shareholder of Connective. We have access to products including those from Macquarie Bank Limited.</p>
                                                        <p>Commissions paid by Connectives lender panel are transparent and do not influence the broker or consumer choice. Connective is committed to quality consumer outcomes in all circumstances.</p><br/>
                                                        <p><b>Referrers and referral fees</b></p>
                                                        <p>We obtain referrals from a range of sources, including accountants, financial planners, real estate agents and other people. If you were introduced or referred to us, we may pay the referrer a commission or a fee.</p> 
                                                        <p>Details of any commission or fees being paid to the referrer will be included in the Summary of Requirements and Credit Proposal document.</p><br/>
                                                        
                                                        <p><b>Dispute resolution and complaints</b></p>
                                                        <p>We are committed to providing you with the best possible service, however we understand there may be times where you are not satisfied. If this occurs, please inform us verbally or in writing with the exact details of your complaint, so we can work towards a prompt and fair resolution.</p>
                                                        <p>If we are unable to reach a satisfactory resolution, you can make a complaint in writing to us. With regards to complaints resolution, we are mindful of the need to ensure that consumers are treated fairly and with respect during the complaints handling process. Any dissatisfaction with a credit representative operating under the licence will be handled in an efficient, timely and effective manner in accordance with ASIC regulations of Internal Dispute Resolution (IDR).</p>
                                                        <p>Our details are:</p>
                                                        <p>Attention:  Compliance and Complaints Handling Officer</p>
                                                        <p>Phone: 1300 13 17 11</p>
                                                        <p>Email: hello@parkerlane.com.au</p>
                                                        <p>Website: parkerlane.com.au</p>
                                                        <p>Mail:  24 The Avenue, Linley Point NSW 2066</p>
                                                        <p>We hope that you will be satisfied with how we deal with your complaint. However, if your concerns remain unresolved, or you have not heard from us within 30 days, then you can have your complaint heard by an independent party. The complaint can be lodged with the Australian Financial Complaints Authority (AFCA):</p>
                                                        <p>Phone:1800 931 678 (free call)</p>
                                                        <p>Email:info@afca.org.au</p>
                                                        <p>Website:www.afca.org.au</p>
                                                        <p>
                                                            Mail:       Australian Financial Complaints Authority, GPO Box 3, Melbourne VIC 3001
                                                            Time limits may apply to complain to AFCA and so you should act promptly or otherwise consult the AFCA website to find out if or when the time limit relevant to your circumstances expires.
                                                        </p><br/>
                                                        <p><b>Things you should know</b></p>
                                                        <p>We dont provide legal or financial planning advice. It is important you understand your legal obligations under the loan contract and the financial consequences. If you have any doubts, you should obtain independent legal and financial planning advice before you enter any loan.</p><br/>
                                                        <p><b>Entertainment and hospitality register</b></p>
                                                        <p>We hold and maintain an entertainment and hospitality register. A copy can be provided on request.</p><br/>
                                                        <p><b>Further Information</b></p>
                                                        <p>For more information regarding this Credit Guide or anything else about our services, just contact us at any time. Were here to assist you.</p><br/><br/>
                                                    </div>  
                                                </div>
                                                <div id="btn6">
                                                    <button type="button" class="collapsible" >Privacy Consent<i class="fa fa-angle-right" style="float : right; padding : 4px;"></i></button>
                                                    <div class="content" style="border-bottom : 1px solid black !important;">
                                                        <p><b>Privacy disclosure statement and consent</b></p><br/>
                                                        <p><b>Part A</b></p><br/>
                                                        <p><b>Overview</b></p>
                                                        <p>In handling your personal information, we and our representatives (the Broker) are committed to complying with the Privacy Act 1988 and the Australian Privacy Principles.
                                                            The Brokers are Australian Credit License holders. Any references to we, us, our are to the Broker and will include reference to our aggregator, Connective Broker Services Pty Ltd and any of its related companies (Connective).
                                                            We collect information about you for the purposes you agree to in this Privacy Disclosure Statement and Consent (Consent). When you ask us to assist, you agree we can, consistent with Australias privacy and credit reporting laws, collect, use and exchange consumer and/or commercial credit and personal information (information) about you for those purposes.
                                                            We are collecting information about you, as applicable:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>To source for you, or a company of which you are a director:</li>
                                                            <ol>
                                                                <li>Consumer credit for personal, household, domestic or residential investment purposes; or</li>
                                                                <li>Commercial credit for business purposes; or</li>
                                                                <li>Other services stated in this Consent; or</li>
                                                                <li>To support a guarantor application, you will provide.</li>
                                                            </ol>
                                                        </ul>
                                                        <p>As your broker, we require the information we collect from you to assess your credit or guarantor application or the credit application of a company of which you are a director, to source a suitable credit provider and any required insurances and to manage the application process, where required. If you do not provide the information sought, we may be unable to process your application, or the companys application, or we may be limited in the other services we can offer you or the company.</p><br/>
                                                        <p><b>Your information - Collection and Disclosure</b></p>
                                                        <p>The personal information we collect may include a broad range of information from your name, address, and contact details to other information about your qualifications, employment history and financial information.</p>
                                                        <p>Personal information may include any sensitive information (including health information) and may include any information you tell us about any vulnerability you may have. We may use that information to assess your application and, where appropriate, to source a suitable credit provider or lessor and / or insurance provider.</p>
                                                        <p>We may, as appropriate:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>Disclose your identification information to a consumer credit reporting service (Consumer CRS) and/or a commercial credit reporting service (Commercial CRS), where we hold your consent (refer Schedule 1).</li>
                                                            <li>Use any information a CRS provides in its report to assist us to preliminarily assess your credit or guarantor application (references to a CRS could be to either a Consumer CRS or a Commercial CRS).</li>
                                                            <li>Disclose your information to an insurer or insurers to source any insurances you wish to obtain; and</li>
                                                            <li>Disclose your information to our advisers, aggregators, licensees and other financial intermediaries, a credit provider or credit providers to apply for finance on your behalf.</li>
                                                        </ul>
                                                        <p>Some of the recipients to whom we disclose your personal information may be based overseas. It is not practicable to list every country in which such recipients are located but it is likely that such countries will include the Philippines, India and Nepal.</p><br/>
                                                        <p><b>How we protect your information</b></p>
                                                        <p>We take all reasonable steps to protect your personal information from misuse, interference, loss, unauthorised access, modification, or exposure. All Connective staff are required by the terms of their employment to maintain the confidentiality of customer information. Access to your information is restricted to those employees whose job requires that information. Access to our premises and computer systems is restricted through locks, password protection, internet firewalls and routers.
                                                            We will take reasonable steps to destroy or de-identify your personal information when your personal information is no longer required for our business functions.</p><br/>
                                                        <p><b>Credit Providers</b></p>
                                                        <p>As part of providing our services to you, we may undertake tasks for a credit provider which are reasonably necessary to manage the application process. When doing so, we are acting as agent for the credit provider, with the same privacy law requirements applying to both of us.</p>
                                                        <p>We may submit your application to one or more credit providers listed in our credit guide, or other lenders not on our panel as authorised by you in the Credit Proposal.</p>
                                                        <p>A credit provider, to whom we submit an application, may disclose information about you to, and collect information about you from, one or more CRS.</p>
                                                        <p>The website of each credit provider contains details of each CRS with which it deals and other details about information held about you, including whether that information may be held or disclosed overseas and, if so, in which countries. The websites also describe your key rights. These details may be described on the credit providers websites as notifiable matters, privacy policy, credit reporting policy or privacy disclosure statement and consent, or similar.</p>
                                                        <p>For each Consumer CRS a credit provider uses, the website details will include the following specific information:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>That the CRS may include information the credit provider discloses about you to other credit providers to assess your credit worthiness.</li>
                                                            <li>That, if you become overdue in making consumer credit payments or commit a serious credit infringement, the credit provider may disclose that information to the CRS.</li>
                                                            <li>How you can obtain the credit providers and/or the CRSs policies about managing your information</li>
                                                            <li>Your right to access and/or correct information held about you and to complain about conduct that may breach the privacy and credit reporting laws.</li>
                                                            <li>Your right to request a CRS not to undertake pre-screening for purposes of direct marketing by a credit provider.</li>
                                                            <li>Your right to request a CRS not to release information about you if you believe you are a victim of fraud.</li>
                                                        </ul>
                                                        <p>This detail will also be included by the credit provider who approves your application in the privacy disclosure statement and consent document it will provide to you.</p>
                                                        <p>Each credit provider website includes information on how to contact it and how to obtain a copy of its privacy documents in a form that suits you (e.g. hardcopy or email).</p><br/>
                                                        <p><b>You agree we may:</b></p>
                                                        <ul class="slds-list_dotted">
                                                            <li>Use your information:</li>
                                                            <ol>
                                                                <li>To assess your consumer or commercial credit and/or guarantee application and/or to assess a credit application by a company of which you are a director.</li>
                                                                <li>To source any finances you require.</li>
                                                                <li>To source any insurances you require.</li>
                                                                <li>As the law authorises or requires.</li>
                                                            </ol>
                                                            <li>Disclose to, and obtain from, any prospective credit provider or insurer, information about you that is reasonably necessary to obtain the finance and insurances you require.</li>
                                                            <li>Obtain from, and disclose to, any third party, information about you, the applicant(s) or guarantor(s) that is reasonably necessary to assist you obtain the finance and insurances required.</li>
                                                            <li>Provide your information, including your credit report(s), to one or more of the credit providers so they can assess your application, or the application of a company of which you are a director, or your suitability as a guarantor.</li>
                                                            <li>Provide information about you to a guarantor, or prospective guarantor.</li>
                                                            <li>Disclose your information to the extent permitted by law to other organisations that provide us with services, such as contractors, agents, printers, mail houses, lawyers, document custodians, securitisers and computer systems consultants or providers, so they can perform those services for us. Some of which may be located overseas.</li>
                                                            <li>Disclose your information to any other organisation that may wish to acquire, or has acquired, an interest in our business or any rights under your contract with us, or the contract with us of a company of which you are a director.</li><br/>
                                                        </ul>
                                                        <p><b>Your rights</b></p>
                                                        <p>You have the right to ask:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>Us to provide you with all the information we hold about you.</li>
                                                            <li>Us to correct the information we hold if it is incorrect.</li>
                                                            <li>Us for copies of our privacy policy and this document, in a form that suits you (e.g. hardcopy or email).</li>
                                                            <li>A CRS not to use your information for direct marketing assessment purposes, including pre-screening.</li>
                                                            <li>A CRS to provide you with a copy of any information it holds about you.</li>
                                                        </ul>
                                                        <p>You can gain access to the information we hold about you by contacting our Privacy Officer at the following address:{!opportunity.Applicant_1__r.Postal_Address__pc}</p>
                                                        <p>In some cases, an administration fee may be charged to cover the cost of providing the information. Our Privacy Policy also deals with our complaints process and is available on our website or we will provide you with a copy if you ask us. Schedule 1 at the end of this document sets out the contact details for each CRS.</p><br/>
                                                        <p><b>Extended Effectiveness for Commercial Credit</b></p>
                                                        <p>Your agreement and consent to the disclosures and consents in this document will be effective for a period of 12 months, but only in relation to commercial credit. Your agreement to this ceases when you either withdraw it by contacting us using our details above or 12 months after you sign below, whichever first occurs. This will allow us to continue to provide our services to you without the need to ask you to sign a new privacy statement and consent each time you require commercial credit within a 12-month period. The extended effectiveness does not apply in relation to consumer credit.
                                                            Where the applicant, or guarantor, is a company of which you are a director, you consent to the disclosure and use of your information, in addition to the companys information, in each of the ways specified in this document.</p>
                                                        <p><b>Your consent to collect and disclose</b></p>
                                                        <p>By asking us to assist, you consent to the collection and use of the information you have provided to us for the purposes described above. For more information on your privacy rights</p>
                                                        <p>please visit www.privacy.gov.au</p><br/><br/>
                                                        <p><b>Part B</b></p>
                                                        <p><b>Your consent to provide your personal information to a credit reporting body (CRS)</b></p>
                                                        <p>We can act as your agent to obtain a report or information about your consumer or commercial credit worthiness from a (CRS).  To do so, we may disclose personal information such as your name, date of birth and address to the CRS to obtain an assessment of whether that personal information matches information held by it.</p>
                                                        <p><b>By signing this document you  authorise the Broker or Connective to obtain a credit report on your behalf.</b></p>
                                                        <p>You also agree and consent to, as appropriate:</p>
                                                        <ul class="slds-list_dotted">
                                                            <li>A CRS specified in Schedule 1 disclosing information to a credit provider for the purpose of assessing your application for consumer or commercial credit or your guarantor application, and/or assessing a credit application by a company of which you are a director.</li>
                                                            <li>When you are a prospective guarantor, a credit provider using that information to assess your suitability as a guarantor.</li>
                                                            <li>A credit provider disclosing your information (including information obtained by it from a CRS) to a guarantor, or a prospective guarantor.</li>
                                                            <li>A credit provider disclosing to another credit provider, to your agent, such as us as your broker, or to a servicer, for a particular purpose, information it holds about you.</li> 
                                                        </ul>
                                                        <p>By signing this document, you consent to us making a request on your behalf to obtain information about you from one or more credit reporting service(s) and credit provider(s). That information will assist us in providing our services to you.</p><br/>
                                                        <p><b>Schedule 1 - Credit Reporting Bodies</b></p>
                                                        <ul class="slds-list_dotted">
                                                            <li>Equifax</li>
                                                            <li>Illion</li>
                                                            <li>Experian</li><br/>
                                                        </ul>
                                                    </div>  
                                                </div>
                                            </div><br/><br/>
                                            <div class="creditAPP">
                                                <h1>AUTHORISATION TO ACT</h1>
                                            </div>
                                            <div class="ReadListDoc">
                                                <p>By signing this document you authorise the primary applicant to act on your behalf in all matters relating to the loan application and loan funding process. This includes providing additional information on your behalf and authorising the loan drawdown. The primary contact is:</p>
                                            </div><br/>
                                            <div class="ReadListDoc">
                                                <span><b>Name : {!opportunity.Applicant_1__r.Name}</b></span>
                                            </div><br/>
                                            <div class="creditAPP">
                                                <h1>ELECTRONIC COMMUNICATION</h1>
                                            </div>
                                            <div>
                                                <p>By signing this document you consent to receive all documents and offers (in the form of a contract for you to accept) from us and the credit provider ({!Quote.Lender__c}) via electronic means (email and SMS) to the following contact details:</p>
                                            </div><br/><br/>
                                            <table>
                                                <tr>
                                                    <td><b>Email address :</b>{!opportunity.Applicant_1__r.PersonEmail}</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Mobile phone :</b>{!opportunity.Applicant_1__r.PersonMobilePhone}</td>
                                                </tr>
                                            </table><br/><br/>
                                            <div>
                                                <p>You also consent to the Credit Provider attaching the loan offer document to an email addressed to you and acknowledge that in doing so the Credit Provider has signed the loan offer.</p>
                                            </div><br/><br/>
                                            <div>
                                                <p><b>By signing below you confirm that you have read and agreed to the terms and conditions set out in this document and the Annexure Documents accessible via the links above.</b></p>
                                            </div><br/><br/>
                                        </div>
                                    </apex:pageBlockSection>
                                    <div class="signText">
                                        <span><center>To sign use your finger in the signature panel below then click finish.</center></span>
                                    </div><br/>
                                    <div>
                                        <p><b>Signed by: </b>{!contact.name}</p>
                                    </div><br/><br/>
                                </div>
                                <div class="slds-text-align_left slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                    <section class="signature-component" align="center">
                                        
                                        <center><canvas id="signature-pad"></canvas><br/></center>
                                        
                                        <div>
                                            <center><a href="" id="clear"><u>Clear and redo</u></a></center> <br/><br/>
                                        </div>
                                        <div class="finishbtn">
                                            <button type="button" id="save" style="Display : {!if(opportunity.Lender__c == 'Transport Mutual Credit Union', 'Block', 'none')}">SAVE AND NEXT</button>  
                                            <button type="button" id="signsignSave" style="Display : {!if(opportunity.Lender__c == 'Transport Mutual Credit Union', 'none', 'Block')}">SAVE</button>  
                                        </div>
                                        
                                    </section>
                                    
                                    <br/><br/><br/><br/><br/><br/><br/>
                                    
                                </div>
                            </div>
                        </article>
                    </div>
                    
                </apex:pageBlock>
                    <!--SECTION ONE-->
                
                    <!--SECTION TWO-->
                    <div id="ReadSign2" style="Display : {!if(opportunity.Lender__c == 'Transport Mutual Credit Union', 'Block', 'none')}">
                    <article class="slds-card"> 
                        <div class="slds-card__body slds-card__body_inner">
                            <br/>
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div style="text-align : left; text-align : justify; font-size : 16px; color : blue;">
                                    <span>It is a requirement of a credit union that you become a member of the bank when taking out a product or service with them. Please read and sign the document below</span>
                                </div><br/>
                                <div class="textHead">
                                    <p><b>Transport Mutual Credit Union -{!IF(IsApplicantTwo == true, 'Joint', 'Single')} Membership Application Form.</b></p>
                                </div>
                                <p>(2 of 2 documents)</p><br/>
                                <div>
                                    <div style="text-align : center">
                                        <div>
                                            <table>
                                                <tr>
                                                    <th><u>Applicant1</u></th>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Surname : </b>{!opportunity.Applicant_1__r.LastName}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>First Name : </b>{!opportunity.Applicant_1__r.FirstName}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Date of Birth : </b>{!opportunity.Applicant_1__r.PersonBirthdate}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Gender : </b>{!opportunity.Applicant_1__r.FinServ__Gender__pc}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Address : </b>{!opportunity.Applicant_1__r.Residential_Address__pc}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Postal Address : </b>{!opportunity.Applicant_1__r.Postal_Address__pc}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Phone : </b>{!opportunity.Applicant_1__r.PersonMobilePhone}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Email : </b>{!opportunity.Applicant_1__r.PersonEmail}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Employer : </b>{!emp1.Name}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Occupation : </b>{!emp1.FinServ__Occupation__c}</td>
                                                </tr>
                                            </table>
                                        </div> <br/>
                                        <div id="applicantTwoTable">
                                            <table>
                                                <tr>
                                                    <th><u>Applicant2</u></th>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Surname : </b>{!opportunity.Applicant_2__r.LastName}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>First Name : </b>{!opportunity.Applicant_2__r.FirstName}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Date of Birth : </b>{!opportunity.Applicant_2__r.PersonBirthdate}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Gender : </b>{!opportunity.Applicant_2__r.FinServ__Gender__pc}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Address : </b>{!opportunity.Applicant_2__r.Residential_Address__pc}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Postal Address : </b>{!opportunity.Applicant_2__r.Postal_Address__pc}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Phone : </b>{!opportunity.Applicant_2__r.PersonMobilePhone}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Email : </b>{!opportunity.Applicant_2__r.PersonEmail}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Employer : </b>{!emp2.Name}</td>
                                                </tr>
                                                <tr class="labelofTable">
                                                    <td><b>Occupation : </b>{!emp2.FinServ__Occupation__c}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div><br/><br/>
                                <div class="taxText">
                                    <span>I am a tax resident of each of the following countries and am not a tax resident of any other country:<sub style="color : red; font-size: 18px;position: relative;bottom: 1px;">*</sub></span>
                                </div>
                                <div>
                                    <input type="text" class="slds-input" id="tax-resident" style="height : 40px !important;"/><br/><br/>
                                </div>
                                <div class="taxText">
                                    <span>My tax file number is (optional):</span><br/>
                                    
                                    <input type="text" class="slds-input" id="taxFNumber" style="height : 40px !important"/><br/>
                                    <p style="font-size : 10px">Disclosure of your tax File Number [TFN] is optional. declining to quote is not an offence.</p>
                                </div><br/><br/>
                                <div class="taxText">
                                    <span>If you are a tax resident of a foreign country, enter your Tax Identification Number (TIN) (optional):</span>
                                    <input type="text" class="slds-input" id="tinNumber" style="height : 40px !important"/><br/>
                                    <p style="font-size : 10px;">The TIN is the taxpayer identification number used in the relevant country. If you do not have a TIN for a country you are a tax resident of please explain why in the field above, being either (A) the country does not issue TINs to residents or (B) other reason why you do not have a TIN (with explanation)</p>
                                </div><br/><br/>
                                <div class="taxText">
                                    <p>Please read the following sections carefully.</p><br/>
                                </div><br/>
                                <div class="colapseSec">
                                    <div id="btn1">
                                        <button type="button" class="collapsible">TMCU Details<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                        <div class="content">
                                            <p>Head Office</p>
                                            <p>Ground Floor 410 Elizabeth Street Surry Hills NSW.</p>
                                            <p>Phone: 02 9763 3190 Fax: 02 9763 3199</p>
                                            <p>AFSL / Australian Credit License 240718</p>
                                            <p>ABN 78 087 650 600  BSB 802 847</p><br/>
                                        </div>  
                                    </div>
                                    <div id="btn2">
                                        <button type="button" class="collapsible">Application Details<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                        <div class="content">
                                            <p>I/We apply for membership and one $10 dollar share per Member in Transport Mutual Credit Union Limited (TMCU). I/We agree to be bound by the Constitution of TMCU and the Customer Owned Banking Code of Practice. I/We agree to be bound by TMCUs Account and Access Facility Conditions of Use, as amended, from time to time.</p><br/>
                                        </div>  
                                    </div>
                                    <div id="btn3">
                                        <button type="button" class="collapsible">Privacy and Acknowledgment<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                        <div class="content">
                                            <p>I/We acknowledge receipt of a copy of TMCUs Account and Access Facility Conditions of Use, Privacy Statement, Fees &amp; Charges, and Financial Services Guide, which are obtainable from our website www. transportmutual.com.au.</p><br/>
                                            <p>I/We understand that collection of my Tax File Number or Exemption is authorised and their use and disclosure are strictly regulated by the law and the Privacy Act 1988 (Cth). I/We understand that quoting  my Tax File Number is not compulsory but failing to do so may result in tax being taken out of my interest. I/ We understand that the Tax File Number will be applied to all accounts under this membership unless I/We specifically request otherwise. The Australian Taxation Office has specific laws on Savings and Investment accounts in regard to the Tax File Number (TFN). For more information refer to the Australian Taxation Office at www.ato.gov.au.</p><br/>
                                            <p>I/We understand that TMCU may disclose personal information to Illion, the credit reporting agency for the purpose of identification only. Illion may use the personal information contained in credit information files to electronically verify your identity for the purposes of AML/CTF Act.</p><br/>
                                            <p>TMCU may disclose your name, residential address and date of birth to the credit reporting agency, Illion, for the purpose of verifying your identity. TMCU may request from Illion, and Illion may prepare and provide to TMCU, an assessment of whether this personal information about you matches, in whole or part, the information contained in credit information files in Illions possession or control. Illion may use the personal information about you, and the names, residential addresses and dates of birth contained in credit information file of other individuals, for the purpose of preparing such an assessment.</p><br/>
                                            <p>I/We agree to TMCU providing my personal information to Illion and requesting Illion to assess whether it matches information in credit information files in Illions possession or control.</p><br/>
                                            <p>If you do not wish TMCU to provide your personal information to Illion we will not be able to verify your identity electronically. Please contact TMCU on (02) 8202 8555 for information on alternative ways we can verify your identity.</p><br/>
                                        </div>  
                                    </div>
                                    <div id="btn4">
                                        <button type="button" class="collapsible">Your Declaration<i class="fa fa-angle-right" style="float : right; padding : 4px"></i></button>
                                        <div class="content" style="border-bottom : 1px solid black !important;">
                                            <p>I/We declare that the information relating to my/our personal details and the products and services provided to be true and correct.</p><br/>
                                            <p>I/We understand that all parties named on the account will be jointly responsible for its operation and any debt incurred on it.</p><br/>
                                            <p>I/We acknowledge it is an offence under the Anti-Money Laundering and Counter Terrorism Financing Act 2006 (Cth) to give false and misleading information.</p><br/>
                                        </div>  
                                    </div>
                                </div><br/><br/>
                                <div class="taxText">
                                    <p><b>Consent for Electronic Delivery of Statements &amp; Notices</b></p>
                                </div>
                                <div class="taxText">
                                    <p>Please use my email address:</p>
                                    <ul class="slds-list_dotted">
                                        <li>to send me statements and notices for all my banking and loan accounts; or</li>
                                        <li>to tell me that they are available to view or download from your internet banking site.</li>
                                        <p>I understand that:</p>
                                        <li>you will stop posting me paper statements and notices</li>
                                        <li>I need to check my emails regularly</li>
                                        <li>I can revert to paper statements and notices in the post at any time</li>
                                    </ul>
                                </div><br/>
                                <div class="taxText">
                                    <span style="font-family: sans-serif; font-weight : 600;">Select the number of applicants required to sign to operate your Transport Mutual Credit Union  accounts: <sub style="color : red; font-size: 18px;position: relative;bottom: 1px;">*</sub></span>
                                </div>
                                <div class="slds-form-element">
                                    <div class="slds-form-element__control">
                                        <div class="slds-select_container">
                                            <select class="slds-select" id="selectApplicant" style="height : 40px !important;">
                                                <option value="--Select--">--Select--</option>
                                                <option value="either to sign">either to sign</option>
                                                <option value="both to sign">both to sign</option>
                                            </select>
                                        </div>
                                    </div>
                                </div><br/>
                                <div class="taxText">
                                    <span><b>By signing below you confirm that you have read and agreed to the terms and conditions set out in this document and the Annexure Documents accessible via the links above.</b></span>
                                </div><br/><br/>
                                <div class="centerText" align="center">
                                    <p>To sign use your finger in the signature panel below then click finish.</p>
                                </div><br/>
                                <div style="text-align : left">
                                    <p>Signed by: <b>{!contact.name}</b></p>
                                    <h1></h1>
                                </div><br/><br/>
                                <div>
                                    <section class="signature-component-sec" align="center">
                                        
                                        <center><canvas id="signature-pad-sec"></canvas><br/></center>
                                        
                                        <div>
                                            <center><a href="" id="clear-sign-sec"><u>Clear and redo</u></a></center> <br/><br/>
                                        </div>
                                        <div class="finishbtn">
                                            <button type="button" id="save-sign-sec">FINISH</button>  
                                        </div><br/><br/><br/><br/><br/><br/><br/>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </article>
                </div>
                    <!--SECTION TWO-->
                
                    <!--READ AND SIGN SECTION ENDS-->
                </div>
            </apex:form>
            <div style="display : {!IF(redirectToError == true, 'Block', 'none')}">
                <div>
                    <article class="slds-card" style="display : {!IF(redirectToError == true, 'Block', 'none')}">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__figure logo" align="center">
                                    <span><img src="{!$Resource.New_PL_Logo}" /></span>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <div id="FourthText">
                                <div>
                                    <center><img src="{!$Resource.VOI_Fron_Icons+'/final.png'}" style="height:122px !important;width:122px;"/></center>
                                </div><br/>
                                <h1 class="Head1">
                                    <center><b>Congratulations!</b></center>
                                </h1>
                                <div style="height : 100px">
                                    <h1 class="DoneText">
                                        <center><b>We'll be back to you shortly.</b></center>
                                    </h1>
                                    <div class="text1">
                                        <center><p>A copy of the document have been <br/>emailed to you.</p></center> 
                                    </div><br/>
                                </div>
                            </div>
                            <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                                <div class="slds-box box1" style="border-radius : 6px; box-shadow : none; border : 2px solid #EEEEEE; background : #fafafa">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12" align="left">
                                            <span class="fron-Icon"><img src="{!$Resource.Front_Panle_Icons + '/photo.png'}" style="height:33px; width : 52px"/></span>
                                        </div>
                                        <div class="slds-col slds-size_6-of-12" align="left">
                                            <span class="step1" align="center">STEP 1</span><br/>
                                            <span class="photoid"><b>Photo ID</b></span>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12" align="center">
                                            <div id="icon3">
                                                <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Panel 2 start-->
                                <div class="slds-box box2" style="border-radius : 6px; box-shadow : none; border : 2px solid #EEEEEE; background : #fafafa">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12" align="left">
                                            <span><img src="{!$Resource.Front_Panle_Icons + '/video.png'}" style="height:45px; width : 57px"/></span>
                                        </div>
                                        <div class="slds-col slds-size_6-of-12" align="left">
                                            <span class="step1" align="center">STEP 2</span><br/>
                                            <span class="photoid"><b>Take a clip</b></span>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12" align="center">
                                            <div id="icon1-3">
                                                <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--Panel 3 start-->
                                <div class="slds-box box3" style="border-radius : 6px; box-shadow : none; border : 2px solid #EEEEEE; background : #fafafa">
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_3-of-12" align="left">
                                            <span class="fron-Icon"><img src="{!$Resource.Front_Panle_Icons + '/sign.png'}" style="height:38px; width : 56px"/></span>
                                        </div>
                                        <div class="slds-col slds-size_6-of-12" align="left">
                                            <span class="step1" align="center">STEP 3</span><br/>
                                            <span class="photoid"><b>e-sign docs</b></span>
                                        </div>
                                        <div class="slds-col slds-size_3-of-12" align="center">
                                            <div id="icon2-3">
                                                <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                            </div>
                                        </div>
                                    </div>
                                </div><br/>
                                <!--Button-->
                                <div id="FinishBtn">
                                    <div class="launchbtn">
                                        <a href="https://www.parkerlane.com.au/"><button type="button">Finish</button></a>
                                    </div><br/>
                                </div>
                                <div id="2ndAnchor">
                                    <div class="anchor" >
                                        <a href="#"><u>Speak to someone</u></a>
                                    </div>   
                                </div>
                                
                            </div>
                        </div>
                    </article>
                </div>
            </div>
            
            <!--for sending only E-sign or VOI-->
            <div>
                <article class="slds-card" id="singleVOI">
                    <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__figure logo" align="center">
                                <span><img src="{!$Resource.New_PL_Logo}" /></span>
                            </div>
                        </header>
                    </div>
                    <div class="slds-card__body slds-card__body_inner">
                        <div id="FourthText">
                            <div>
                                <center><img src="{!$Resource.VOI_Fron_Icons+'/final.png'}" style="height:122px !important;width:122px;"/></center>
                            </div><br/>
                            <h1 class="Head1">
                                <center><b>Congratulations!</b></center>
                            </h1>
                            <div style="height : 100px">
                                <h1 class="DoneText">
                                    <center><b>We'll be back to you shortly.</b></center>
                                </h1>
                                <div class="text1">
                                    <center><p>A copy of the document have been <br/>emailed to you.</p></center> 
                                </div><br/>
                            </div>
                        </div>
                        <div class="slds-text-align_center slds-col slds-size_1-of-1 slds-medium-size_6-of-6 slds-large-size_6-of-6 slds-order_2 slds-medium-order_2 slds-large-order_2">
                            <div class="slds-box box1" style="border-radius : 6px; box-shadow : none; border : 2px solid #EEEEEE; background : #fafafa">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_3-of-12" align="left">
                                        <span class="fron-Icon"><img src="{!$Resource.Front_Panle_Icons + '/photo.png'}" style="height:33px; width : 52px"/></span>
                                    </div>
                                    <div class="slds-col slds-size_6-of-12" align="left">
                                        <span class="step1" align="center">STEP 1</span><br/>
                                        <span class="photoid"><b>Photo ID</b></span>
                                    </div>
                                    <div class="slds-col slds-size_3-of-12" align="center">
                                        <div id="icon3">
                                            <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Panel 2 start-->
                            <div class="slds-box box2" style="border-radius : 6px; box-shadow : none; border : 2px solid #EEEEEE; background : #fafafa">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_3-of-12" align="left">
                                        <span><img src="{!$Resource.Front_Panle_Icons + '/video.png'}" style="height:45px; width : 57px"/></span>
                                    </div>
                                    <div class="slds-col slds-size_6-of-12" align="left">
                                        <span class="step1" align="center">STEP 2</span><br/>
                                        <span class="photoid"><b>Take a clip</b></span>
                                    </div>
                                    <div class="slds-col slds-size_3-of-12" align="center">
                                        <div id="icon1-3">
                                            <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Panel 3 start-->
                            <div class="slds-box box3" style="border-radius : 6px; box-shadow : none; border : 2px solid #EEEEEE; background : #fafafa">
                                <div class="slds-grid">
                                    <div class="slds-col slds-size_3-of-12" align="left">
                                        <span class="fron-Icon"><img src="{!$Resource.Front_Panle_Icons + '/sign.png'}" style="height:38px; width : 56px"/></span>
                                    </div>
                                    <div class="slds-col slds-size_6-of-12" align="left">
                                        <span class="step1" align="center">STEP 3</span><br/>
                                        <span class="photoid"><b>e-sign docs</b></span>
                                    </div>
                                    <div class="slds-col slds-size_3-of-12" align="center">
                                        <div id="icon2-3">
                                            <span class="icon3"><img src="{!$Resource.VOI_Icons + '/greencircle.png'}" /></span>        
                                        </div>
                                    </div>
                                </div>
                            </div><br/>
                            <!--Button-->
                            <div id="FinishBtn">
                                <div class="launchbtn">
                                    <a href="https://www.parkerlane.com.au/"><button type="button">Finish</button></a>
                                </div><br/>
                            </div>
                            <div id="2ndAnchor">
                                <div class="anchor" >
                                    <a href="#"><u>Speak to someone</u></a>
                                </div>   
                            </div>
                            
                        </div>
                    </div>
                </article>
            </div>
            <!--for sending only E-sign or VOI-->
            <div>
                <canvas id="output" style="overflow:none; width : 100% !important; height : auto;"></canvas>
            </div>
            <!--Error Section-->
            <div style="color : #1a2745;">
                <div id="mainErDiv">
                    <div class="slds-media__figure logo" align="center">
                        <span><img src="{!$Resource.New_PL_Logo}" /></span>
                    </div>
                    <div style="text-align:center; margin-top : 40px;" >
                        <img src="{!$Resource.SolarLoan + '/img/Oopss.png'}" height="auto" width="19%" />
                    </div>
                    <div style="font-family: ProximaNova-AltBold !important; text-align:center;font-size: 35px; margin-top : 3px;">
                        <span>Oops</span>
                    </div>
                    <div style="text-align:center;font-size:20px; margin-top : 10px;">
                        <span><b>
                            You have denied access to your <br/>
                            camera or microphone.</b>
                        </span>
                    </div>
                    <div style="text-align:center;font-size:18px;">
                        <p>
                            Follow the steps blow then return to <br/>
                            this page and tap <span style="font-weight: bold; font-size : 16px;"> Try Again</span>
                        </p>
                    </div>
                    <br/><br/>
                    <div style="text-align:center;font-size:20px;">
                        <div align="center">
                            <span>
                                <img src="{!$Resource.SolarLoan + '/img/Chrome.jpg'}" height="auto" width="10%"/>
                                <a href="" style="color:DodgerBlue;text-decoration:underline;font-weight:bold;" onclick="goToChrome();"> Chrome(Android)</a>
                            </span>
                        </div>
                        <div style="margin-top : 30px;" align="center">
                            <span>
                                <img src="{!$Resource.SolarLoan + '/img/safari.png'}" height="auto" width="12%" style="position : relative; right : 5px;"/>
                                <a href="" style="color:DodgerBlue;text-decoration:underline;font-weight:bold;" onclick="goToSafari();"> Safari(iPhone)</a>
                            </span>
                        </div>
                        <div style="margin-top : 25px;" align="center">
                            <span>
                                <img src="{!$Resource.SolarLoan + '/img/Chrome.jpg'}" height="auto" width="10%"/>
                                <a href="" style="color:DodgerBlue;text-decoration:underline;font-weight:bold;" onclick="goToIosChrome();"> Chrome(iPhone)</a>
                            </span>
                        </div>
                    </div>
                    <div align="center" style="margin-top : 30px; font-size : 18px;">
                        <p>Already tried this? <a href="" style="color : rgb(3, 45, 96); font-size : 16px;" onclick="goForEsignAfterError();"><b><u>Click here</u></b></a><br/>to skip this step.</p>
                    </div>
                </div>
                
                <div id="secerDIv">
                    <div class="slds-media__figure logo" align="center">
                        <span><img src="{!$Resource.New_PL_Logo}" /></span>
                    </div>
                    <div style="margin-top : 3px; margin-left : 9px; margin-right : 9px;">                                              
                        <div>
                            <div id="chrome" style="text-align : center; font-size : 18px; margin-top : 35px;">
                                <div>
                                    <p style="margin : 10px;">
                                        <img src="{!$Resource.SolarLoan + '/img/infosymbol.png'}" style="width : 50px;"/>
                                        <b style="font-size : 32px;">&nbsp;Steps</b>
                                    </p>
                                </div>
                                <div>
                                    <div>
                                        <img src="{!$Resource.VOI_Chrome_Gif+'/Chrome.gif'}" width="50%"/>
                                    </div>
                                </div>
                                <div  style="text-align : left; margin-left : 35px; margin-top : 18px;">
                                    <ol class="slds-list_ordered">
                                        <li>
                                            <p>&nbsp;&nbsp;&nbsp;Tap
                                                <img src="{!$Resource.SolarLoan + '/img/lockIcon.png'}" style="width : 27px; position : relative; bottom : 3px;"/>
                                                in the address bar.
                                            </p>
                                        </li>
                                        <li style="margin-top : 2px;">&nbsp;&nbsp;&nbsp;Tap 
                                            <img src="{!$Resource.SolarLoan + '/img/cogWh.png'}" style="width : 25px;"/> 
                                            <b style="font-size : 17px;">Permissions.</b>
                                        </li>
                                        <li style="margin-top : 2px;">
                                            <p>&nbsp;&nbsp;&nbsp;Set both the <b style="font-size : 17px;">Camera</b> and <br/><b style="font-size : 17px;">&nbsp;&nbsp;&nbsp;Microphone</b> to <b style="font-size : 17px;">On.</b></p>
                                        </li>
                                        <li style="margin-top : 2px;"><p>&nbsp;&nbsp;&nbsp;Return here and Tap <a href="" onclick="location.reload();"><b style="font-size : 17px;"><u>Try Again</u></b></a></p></li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        <div id="safari" style="text-align : center; font-size : 18px; margin-top : 30px;">
                            <div>
                                <p style="margin : 15px;">
                                    <img src="{!$Resource.SolarLoan + '/img/infosymbol.png'}" style="width : 50px;"/>
                                    <b style="font-size : 32px;">&nbsp;Steps</b>
                                </p>
                            </div>
                            <div>
                                <div>
                                    <img src="{!$Resource.VOI_Safari_Gif+'/Safari.gif'}" width="50%"/>
                                </div>
                            </div>
                            <div style="text-align : left; margin-left : 35px; margin-top : 18px;">
                                <ol class="slds-list_ordered">
                                    <li><p>&nbsp;&nbsp;&nbsp;Tap <b style="font-size : 15px;">A</b><b style="font-size : 22px;">A</b> in the address bar.</p></li>
                                    <li style="margin-top : 2px;">&nbsp;&nbsp;&nbsp;Tap 
                                        <img src="{!$Resource.SolarLoan + '/img/cogWh.png'}" style="width : 25px;"/> 
                                        <b style="font-size : 17px;">Website Settings.</b>
                                    </li>
                                    <li style="margin-top : 2px;">
                                        <p>&nbsp;&nbsp;&nbsp;Set both the <b style="font-size : 17px;">Camera</b> and <br/><b style="font-size : 17px;">&nbsp;&nbsp;&nbsp;Microphone</b> to <b style="font-size : 17px;">Ask.</b></p>
                                    </li>
                                    <li style="margin-top : 2px;"><p>&nbsp;&nbsp;&nbsp;Return here and Tap <a href="" onclick="location.reload();"><b style="font-size : 17px; color : #0176D3"><u>Try Again</u></b></a></p></li>
                                </ol>
                            </div>                                                                         
                        </div>
                        <div id="iosChrome" style="text-align : center; font-size : 18px; margin-top : 35px;">
                            <div>
                                <p style="margin : 10px;">
                                    <img src="{!$Resource.SolarLoan + '/img/infosymbol.png'}" style="width : 50px;"/>
                                    <b style="font-size : 32px;">&nbsp;Steps</b>
                                </p>
                            </div>
                            <div>
                                <div>
                                    <img src="{!$Resource.VOI_IO_CHROM_GIF+'/ChromeIOS.gif'}" width="45%"/>
                                </div>
                            </div>
                            <div  style="text-align : left; margin-left : 35px; margin-top : 18px;">
                                <ol class="slds-list_ordered">
                                    <li>
                                        <p>&nbsp;&nbsp;&nbsp;Open the <img src="{!$Resource.SolarLoan + '/img/setting.png'}"  width="6%" /> <b style="font-size : 16px;">Setting</b> app.
                                        </p>
                                    </li>
                                    <li style="margin-top : 2px;">&nbsp;&nbsp;&nbsp;Open <img src="{!$Resource.SolarLoan + '/img/Chrome.jpg'}"  width="6%" /> <b style="font-size : 16px;">Chrome.</b>
                                    </li>
                                    <li style="margin-top : 2px;">
                                        <p>&nbsp;&nbsp;&nbsp;Ensure both <img src="{!$Resource.SolarLoan + '/img/camera.png'}"  width="6%" /> Camera and <br/>&nbsp;&nbsp;&nbsp;<img src="{!$Resource.SolarLoan + '/img/mike.png'}"  width="6%" /> Microphone are set to <b style="font-size : 16px;">on.</b> </p>
                                    </li>
                                    <li style="margin-top : 2px;"><p>&nbsp;&nbsp;&nbsp;Return here and Tap <a href="" onclick="location.reload();"><b style="font-size : 17px;"><u>Try Again</u></b></a></p></li>
                                </ol>
                            </div>
                        </div>                       
                    </div>
                </div>
                <div id="laseerDiv">
                    <div class="slds-media__figure logo" align="center">
                        <span><img src="{!$Resource.New_PL_Logo}" /></span>
                    </div>
                    <div style="margin-top : 15px; margin-left : 9px; margin-right : 9px; text-align:center;">
                        <div>
                            <br/><br/> <img src="{!$Resource.SolarLoan + '/img/Oopss.png'}" height="auto" width="20%" />
                        </div>
                        <div style="text-align: center;margin-top: 15px;font-size: 40px">
                            <p><b>Still no luck?</b></p>
                        </div>
                        <div style="font-size : 19px;">
                            <p style="margin-top : 12px;"><b>Changing you camera settings<br/> can be a pain in the neck!</b></p>
                            <p style="margin-top : 12px;">Our team have been notify and<br/> will be back to you in next 6-8<br/> business hours to help.</p>
                            <p style="margin-top : 12px;"><b>if you application is urgent, please <br/> call 1300 13 17 11.</b></p><br/>
                            <p><b>Want to give it another go ?</b> Click <br/>below to go back to the instructions <br/>page.</p>
                        </div>
                        <div class="thirdBtn">
                            <br/><button type="button" onclick="location.reload();">Go Back and Try Again.</button>
                        </div>
                    </div>
                </div>
                <div id="relaxDiv">
                    <div class="slds-media__figure logo" align="center">
                        <span><img src="{!$Resource.New_PL_Logo}" /></span>
                    </div>
                    <div style="text-align:center; margin-top : 40px;" >
                        <img src="{!$Resource.SolarLoan + '/img/Relax.png'}" height="auto" width="22%" />
                    </div>
                    <div align="center">
                        <br/><p style="font-size : 35px;"><b>Relax!</b></p><br/>
                    </div>
                    <div align="center" style="font-size : 17px;">
                        <p><b>Camera settings can be a pain.</b></p><br/>
                    </div>
                    <div align="center" style="font-size : 17px; line-height : 1.6;">
                        <p>Our team have been notify that<br/>you hit a snag with your identity<br/>verification.</p>
                        <p style="margin-top : 12px;">We will call you within in the next 8<br/>business hours to get it sorted.</p>
                        <p style="margin-top : 12px;"><b>In the meantime our credit team<br/>will begin working on your<br/>application so time is not wasted.</b></p><br/><br/>
                    </div>
                    <div class="finishbtn" style="margin : 15px;">
                        <a href="https://www.parkerlane.com.au/"><button type="button">Finish</button></a>
                    </div>
                </div>
            </div>
            <!--Error Section-->
            
        </body>
    </html>
    <script>
    function checkIsEnableFirst(){
        var x = document.getElementById("icon2");
        if (window.getComputedStyle(x).display === "block") {
           startCameraForFrontDL();
        }        
    }
    function checkIsEnableSec(){
        var x = document.getElementById("icon1-2");
        if (window.getComputedStyle(x).display === "block") {
            onVideoSec();
        }                
    }
    function checkIsEnableThird(){
        var x = document.getElementById("icon2-2");
        if (window.getComputedStyle(x).display === "block") {
            ReadANDSign();
        }                
    }
    
    var IsErrorOnVOI;
    var whereError;
    function goToIosChrome(){
        document.getElementById("mainErDiv").style.display = 'none';
        document.getElementById("secerDIv").style.display = 'block';
        document.getElementById("safari").style.display = 'none';
        document.getElementById("iosChrome").style.display = 'block';
        document.getElementById("chrome").style.display = 'none';
        
    }
    function goToChrome(){
        document.getElementById("mainErDiv").style.display = 'none';
        document.getElementById("secerDIv").style.display = 'block';
        document.getElementById("safari").style.display = 'none';
        document.getElementById("iosChrome").style.display = 'none';
        document.getElementById("chrome").style.display = 'block';
    }
    function goToSafari(){
        document.getElementById("mainErDiv").style.display = 'none';
        document.getElementById("secerDIv").style.display = 'block';
        document.getElementById("safari").style.display = 'block';
        document.getElementById("iosChrome").style.display = 'none';
        document.getElementById("chrome").style.display = 'none';
    }
    function goback(){
        document.getElementById("mainErDiv").style.display = 'block';
        document.getElementById("secerDIv").style.display = 'none';
    }
    /*Errors pages*/
    function stopSpinner(){
        document.getElementById("spin").style.display = 'none';
    }
    
    function defaultHIde(){
        // alert('name'+{!contact.Current_VOI_stage__c});
        /*Errors pages*/
        // alert("Your screen resolution is: " + window.screen.width * window.devicePixelRatio + "x" + window.screen.height * window.devicePixelRatio);
        document.getElementById("mainErDiv").style.display = 'none';
        document.getElementById("iosChrome").style.display = 'none';
        document.getElementById("relaxDiv").style.display = 'none'; 
        document.getElementById("secerDIv").style.display = 'none';
        document.getElementById("laseerDiv").style.display = 'none';
        document.getElementById("chrome").style.display = 'none';
        document.getElementById("safari").style.display = 'none';
        /*Errors pages*/
        IsErrorOnVOI = false;
        document.getElementById("icon4").style.display = 'none';    
        document.getElementById("icon1-4").style.display = 'none';  
        document.getElementById("icon2-4").style.display = 'none';  
        document.getElementById("output").style.display = 'none';
        document.getElementById("singleVOI").style.display = 'none';
        document.getElementById("spin").style.display = 'none';
        
        document.getElementById("pb2").style.display = 'none';
        document.getElementById("pb3").style.display = 'none';
        document.getElementById("pb2A").style.display = 'none';
        document.getElementById("pb3A").style.display = 'none';        
        
        document.getElementById("icon1").style.display = 'none';
        document.getElementById("icon3").style.display = 'none';
        
        document.getElementById("icon1-2").style.display = 'none';
        document.getElementById("icon1-3").style.display = 'none';
        
        document.getElementById("icon2-2").style.display = 'none';
        document.getElementById("icon2-3").style.display = 'none';
        
        document.getElementById("SecondText").style.display = 'none';
        
        document.getElementById("nextBtn").style.display = 'none';
        
        document.getElementById("firstText").style.display = 'Block';
        document.getElementById("SecondText").style.display = 'none';
        document.getElementById("ThirdText").style.display = 'none';
        
        
        
        document.getElementById("Vid1").style.display = 'none';
        document.getElementById("Vid2").style.display = 'none';
        document.getElementById("Vid3").style.display = 'none';
        document.getElementById("ReadSignBtn").style.display = 'none';
        
        document.getElementById("ReadSign1").style.display = 'none';
        document.getElementById("ReadSign2").style.display = 'none';
        
        document.getElementById("FinishBtn").style.display = 'none';
        
        document.getElementById("FourthText").style.display = 'none';
        
        document.getElementById("2ndAnchor").style.display = 'none';
        document.getElementById("applicantTwoTable").style.display = 'Block';
        
        document.querySelector('.box2').style.boxShadow = 'none';
        document.querySelector('.box2').style.background = 'none';
        document.querySelector('.box2').style.background = '#fafafa';
        document.querySelector('.box2').style.border = '2px solid #EEEEEE';    
        
        document.querySelector('.box3').style.boxShadow = 'none';
        document.querySelector('.box3').style.background = 'none';
        document.querySelector('.box3').style.background = '#fafafa';
        document.querySelector('.box3').style.border = '2px solid #EEEEEE';
        
        if({!IF(contact.Current_VOI_stage__c == 'Video Section', true, false)}){
            document.getElementById("pb3A").style.display = 'none';
            document.getElementById("pb1").style.display = 'Block';
            
            document.getElementById("icon2").style.display = 'none';
            document.getElementById("icon3").style.display = 'Block';
            
            document.querySelector('.box1').style.border = '2px solid #EEEEEE';
            document.querySelector('.box1').style.boxShadow = 'none';
            document.querySelector('.box1').style.background = 'none';
            document.querySelector('.box1').style.background = '#fafafa';
            
            
            document.querySelector('.box2').style.border = 'none';
            document.querySelector('.box2').style.background = 'none';
            document.querySelector('.box2').style.boxShadow = '5px 5px 5px 0px rgb(0 0 0 / 54%)';
            document.querySelector('.box2').style.background = '#ffffff';    
            
            document.querySelector('.box3').style.boxShadow = 'none';
            document.querySelector('.box3').style.background = 'none';
            document.querySelector('.box3').style.background = '#fafafa';
            document.querySelector('.box3').style.border = '2px solid #EEEEEE';
            
            document.getElementById("icon1-1").style.display = 'none';
            document.getElementById("icon1-2").style.display = 'Block';
            
            document.getElementById("firstText").style.display = 'none';
            document.getElementById("SecondText").style.display = 'block';
            
            document.getElementById("launchBtn").style.display = 'none';
            document.getElementById("nextBtn").style.display = 'Block';
        }
        else if({!IF(contact.Current_VOI_stage__c == 'E-sign', true, false)}){
            document.getElementById("pb1").style.display = 'Block';
            document.getElementById("Vid3").style.display = 'none';
            document.getElementById("launchBtn").style.display = 'none';
            
            document.getElementById("firstText").style.display = 'none';
            document.getElementById("SecondText").style.display = 'none';
            document.getElementById("ThirdText").style.display = 'Block';
            
            document.getElementById("icon2").style.display = 'none';
            document.getElementById("icon3").style.display = 'Block';
            
            document.getElementById("icon1-1").style.display = 'None';
            document.getElementById("icon1-2").style.display = 'None';
            document.getElementById("icon1-3").style.display = 'Block';
            document.getElementById("icon2-1").style.display = 'None'; 
            document.getElementById("icon2-2").style.display = 'Block';
            
            document.querySelector('.box2').style.boxShadow = 'none';
            document.querySelector('.box2').style.background = 'none';
            document.querySelector('.box2').style.background = '#fafafa';
            document.querySelector('.box2').style.border = '2px solid #eeeeee';
            
            document.querySelector('.box3').style.border = 'none';
            document.querySelector('.box3').style.background = 'none';
            document.querySelector('.box3').style.boxShadow = '5px 5px 5px 0px rgb(0 0 0 / 54%)';
            document.querySelector('.box3').style.background = '#ffffff';    
            
            
            document.getElementById("nextBtn").style.display = 'None';
            document.getElementById("ReadSignBtn").style.display = 'Block';
        }
        
        if({!IF(voiS.VOI_stage__c == 'VOI',true,false)} ){
            document.getElementById("icon2-1").style.display = 'none';
            document.getElementById("icon2-2").style.display = 'none';
            document.getElementById("icon2-3").style.display = 'Block';
        }
        
        if({!IF(voiS.VOI_stage__c == 'E-SIGN',true,false)} ){
            document.getElementById("pb1").style.display = 'Block';
            document.getElementById("Vid3").style.display = 'none';
            document.getElementById("launchBtn").style.display = 'none';
            
            document.getElementById("firstText").style.display = 'none';
            document.getElementById("SecondText").style.display = 'none';
            document.getElementById("ThirdText").style.display = 'Block';
            
            document.getElementById("icon2").style.display = 'none';
            document.getElementById("icon3").style.display = 'Block';
            
            document.getElementById("icon1-1").style.display = 'None';
            document.getElementById("icon1-2").style.display = 'None';
            document.getElementById("icon1-3").style.display = 'Block';
            document.getElementById("icon2-1").style.display = 'None'; 
            document.getElementById("icon2-2").style.display = 'Block';
            
            document.querySelector('.box2').style.boxShadow = 'none';
            document.querySelector('.box2').style.background = 'none';
            document.querySelector('.box2').style.background = '#fafafa';
            document.querySelector('.box2').style.border = '2px solid #eeeeee';
            
            document.querySelector('.box3').style.border = 'none';
            document.querySelector('.box3').style.background = 'none';
            document.querySelector('.box3').style.boxShadow = '5px 5px 5px 0px rgb(0 0 0 / 54%)';
            document.querySelector('.box3').style.background = '#ffffff';    
            
            
            document.getElementById("nextBtn").style.display = 'None';
            document.getElementById("ReadSignBtn").style.display = 'Block';
            
            
        }
        
        if({!IsApplicantTwo} != true){
            document.getElementById("applicantTwoTable").style.display = 'none';
        }
        
        updateStages('Home');
    }
    /*FRONT DL STARTS*/
    let imagedataForFrotDL = [];
    function startCameraForFrontDL(){
        var video = document.getElementById('videoFrontDL');
        video.setAttribute('autoplay', '');
        video.setAttribute('muted', '');
        video.setAttribute('playsinline', '');
        
        
        document.getElementById("pb1").style.display = 'none';
        document.getElementById("pb2").style.display = 'Block';
        const con = {
            audio: false,
            video: { facingMode: { exact: "environment" },
                    width: { min: 1024, ideal: 3000, max: 3000 },
                    height: { min: 576, ideal: 2400, max: 2400 }
                   } 
        };
        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia(con)
            .then(function (stream) {
                video.srcObject = stream;
                 updateStages('Front DL');
            }).catch(function (error) {
                alert('Oops! Your camera or microphone is disabled. Close for NEXT STEPS.');
                document.getElementById("pb2").style.display = 'none';
                document.getElementById("mainErDiv").style.display = 'block';
                updateStages('Error Page');
                IsErrorOnVOI = true;
                whereError = 'DL Front';
            });
            
        }
    }
    function stopCameraForFrontDL(){
        document.getElementById("pb2").style.display = 'none';
        document.getElementById("pb3").style.display = 'Block';
        try {
            const canvas = document.querySelector('#canvasForFrontDL');
            
            /*Increase Image Quality*/
            
            var video = document.getElementById('videoFrontDL');
            //var aspect = video.videoHeight / video.videoWidth;
            //var wantedWidth = 4020;   // or use height 1280
            //var height = Math.round(wantedWidth * aspect);
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
            
            /*Increase Image Quality*/
            
            let image_data_url = canvas.toDataURL('image/jpeg');
            //console.log('image BSAE 64  '+image_data_url);
            imagedataForFrotDL = image_data_url;
            updateStages('Front DL Preview');
            
        } catch(error){
            console.error('Error to Capture.', error);
        }
        var stream = video.srcObject;
        var tracks = stream.getTracks();
        for (var i = 0; i < tracks.length; i++) {
            var track = tracks[i];
            track.stop();
        }
        video.srcObject = null;
    }
    function takeAgainForFrontDL(){
        var video = document.getElementById('videoFrontDL');
        
        video.removeAttribute('autoplay');
        video.removeAttribute('muted');
        video.removeAttribute('playsinline');
        startCameraForFrontDL();
        document.getElementById("pb3").style.display = 'none';
        document.getElementById("pb2").style.display = 'Block';
    }
    
    function confirmForFrontDL(){
        var val = Math.floor(1000 + Math.random() * 9000); 
        document.getElementById("random").innerHTML = val;
        
        jsActionFunction(val);
        
        document.getElementById("spin").style.display = 'Block';
        
        document.getElementById("pb3").style.display = 'none';
        document.getElementById("pb2A").style.display = 'Block';
        SentFrontDLData(imagedataForFrotDL);
        
    }
    
    /*FRONT DL ENDS*/
    
    /*BACK DL STARTS*/
    let imagedataForBackDL = [];
    function startCameraForBackDL(){
        var video = document.getElementById('videoBackDL');
        video.setAttribute('autoplay', '');
        video.setAttribute('muted', '');
        video.setAttribute('playsinline', '');
        
        
        document.getElementById("pb3").style.display = 'none';
        document.getElementById("pb2A").style.display = 'Block';
        const con = {
            audio: false,
            video: { facingMode: { exact: "environment" },
                    width: { min: 1024, ideal: 3000, max: 3000 },
                    height: { min: 576, ideal: 2400, max: 2400 }
                   } 
        };
        
        if (navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia(con)
            .then(function (stream) {
                document.getElementById("spin").style.display = 'none';
                video.srcObject = stream;
                updateStages('Back DL');
            }).catch(function (error) {
                alert('Oops! Your camera or microphone is disabled. Close for NEXT STEPS.');
                document.getElementById("pb2A").style.display = 'none';
                document.getElementById("spin").style.display = 'none';
                document.getElementById("mainErDiv").style.display = 'block';
                updateStages('Error Page');
                IsErrorOnVOI = true;
                whereError = 'DL Back';
            });
            
        }
    }
    
    function goForEsignAfterError(){
        document.getElementById("spin").style.display = 'none';
        if({!IF(voiS.VOI_stage__c == 'FULL',true,false)} ){
            document.getElementById("relaxDiv").style.display = 'none';
            document.getElementById("mainErDiv").style.display = 'none';
            document.getElementById("pb1").style.display = 'Block';
            document.getElementById("Vid3").style.display = 'none';
            document.getElementById("launchBtn").style.display = 'none';
            
            document.getElementById("firstText").style.display = 'none';
            document.getElementById("SecondText").style.display = 'none';
            document.getElementById("ThirdText").style.display = 'Block';
            if(whereError == 'Video'){
                document.getElementById("icon3").style.display = 'block';   
                document.getElementById("icon4").style.display = 'none';    
            }
            else{
                document.getElementById("icon3").style.display = 'none';    
                document.getElementById("icon4").style.display = 'block';                   
            }
            document.getElementById("icon2").style.display = 'none';
            
            document.getElementById("icon1-4").style.display = 'block';
            
            document.getElementById("icon1-1").style.display = 'none';
            document.getElementById("icon1-2").style.display = 'none';
            document.getElementById("icon1-3").style.display = 'none';
            document.getElementById("icon2-1").style.display = 'None'; 
            document.getElementById("icon2-2").style.display = 'Block';
            
            document.querySelector('.box1').style.boxShadow = 'none';
            document.querySelector('.box1').style.background = 'none';
            document.querySelector('.box1').style.background = '#fafafa';
            document.querySelector('.box1').style.border = '2px solid #eeeeee';
            
            document.querySelector('.box2').style.boxShadow = 'none';
            document.querySelector('.box2').style.background = 'none';
            document.querySelector('.box2').style.background = '#fafafa';
            document.querySelector('.box2').style.border = '2px solid #eeeeee';
            
            document.querySelector('.box3').style.border = 'none';
            document.querySelector('.box3').style.background = 'none';
            document.querySelector('.box3').style.boxShadow = '5px 5px 5px 0px rgb(0 0 0 / 54%)';
            document.querySelector('.box3').style.background = '#ffffff';    
            
            
            document.getElementById("nextBtn").style.display = 'None';
            document.getElementById("ReadSignBtn").style.display = 'Block';
        }
        
        if({!IF(voiS.VOI_stage__c == 'VOI',true,false)}){
            document.getElementById("mainErDiv").style.display = 'none';        
            document.getElementById("laseerDiv").style.display = 'block';
        }
        mailSendToUs();
    }
    
    function stopCameraForBackDL(){
        document.getElementById("pb2A").style.display = 'none';
        document.getElementById("pb3A").style.display = 'Block';
        try {
            const canvas = document.querySelector('#canvasForBackDL');
            
            /*Increase Image Quality*/
            
            var video = document.getElementById('videoBackDL');
            // var aspect = video.videoHeight / video.videoWidth;
            //var wantedWidth = 3024;   // or use height 1280
            // var height = 4032;//Math.round(wantedWidth * aspect);
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
            
            /*Increase Image Quality*/
            
            let image_data_url = canvas.toDataURL('image/jpeg');
            //console.log('image BSAE 64  '+image_data_url);
            imagedataForBackDL = image_data_url;
            updateStages('Back DL Preview');
        } catch(error){
            console.error('Error to Capture.', error);
        }
        var stream = video.srcObject;
        var tracks = stream.getTracks();
        for (var i = 0; i < tracks.length; i++) {
            var track = tracks[i];
            track.stop();
        }
        video.srcObject = null;
    }
    
    function takeAgainForbackDL(){
        document.getElementById("spin").style.display = 'Block';
        var video = document.getElementById('videoBackDL');
        
        video.removeAttribute('autoplay');
        video.removeAttribute('muted');
        video.removeAttribute('playsinline');
        startCameraForBackDL();
        document.getElementById("pb3A").style.display = 'none';
        document.getElementById("pb2A").style.display = 'Block';
    }
    
    function confirmForBackDL(){
        document.getElementById("pb3A").style.display = 'none';
        //document.getElementById("pb2A").style.display = 'Block';
        document.getElementById("pb1").style.display = 'Block';
        
        document.getElementById("icon2").style.display = 'none';
        document.getElementById("icon3").style.display = 'Block';
        
        document.querySelector('.box1').style.border = '2px solid #EEEEEE';
        document.querySelector('.box1').style.boxShadow = 'none';
        document.querySelector('.box1').style.background = 'none';
        document.querySelector('.box1').style.background = '#fafafa';
        
        
        document.querySelector('.box2').style.border = 'none';
        document.querySelector('.box2').style.background = 'none';
        document.querySelector('.box2').style.boxShadow = '5px 5px 5px 0px rgb(0 0 0 / 54%)';
        document.querySelector('.box2').style.background = '#ffffff';    
        
        document.querySelector('.box3').style.boxShadow = 'none';
        document.querySelector('.box3').style.background = 'none';
        document.querySelector('.box3').style.background = '#fafafa';
        document.querySelector('.box3').style.border = '2px solid #EEEEEE';
        
        document.getElementById("icon1-1").style.display = 'none';
        document.getElementById("icon1-2").style.display = 'Block';
        
        document.getElementById("firstText").style.display = 'none';
        document.getElementById("SecondText").style.display = 'block';
        
        document.getElementById("launchBtn").style.display = 'none';
        document.getElementById("nextBtn").style.display = 'Block';
        SentBackDLData(imagedataForBackDL);
        updateStages('DL Uploaded');
    }
    
    /*BACK DL ENDS*/
    
    /*VIDEO SECTION STARTS*/
    var video1 = document.getElementById("videoRec");
    
    video1.setAttribute('autoplay', '');
    video1.setAttribute('playsinline', '');
    
    
    var constraints ={video: {width: 720, height: 480, facingMode: "user"},
                      audio: true
                     };
    let camera_stream = null;
    let media_recorder = null;
    let blobs_recorded = [];
    let video_local; 
    let recordedData = [];
    let recordedDataSecond = [];
    let Video_Screen_Shot = [];
    
    
    async function startVideCam(){
        try {
            camera_stream = await navigator.mediaDevices.getUserMedia(constraints);
            updateStages('Video Recording');
        }
        catch(error) {
             alert('Oops! Your camera or microphone is disabled. Close for NEXT STEPS.');
            document.getElementById("Vid2").style.display = 'none';
            document.getElementById("Vid1").style.display = 'none';
            document.getElementById("mainErDiv").style.display = 'block';
            updateStages('video mike Error');
            IsErrorOnVOI = true;
            whereError = 'Video';
            return;
        }
        
        video1.srcObject = camera_stream;
        //console.log(camera_stream);
        
        document.getElementById("Vid1").style.display = 'none';
        document.getElementById("Vid2").style.display = 'Block';
    }
    // video snap code
        
        function shoot() {
            var canvas = document.getElementById('output');     
            var video = document.getElementById('videoRec');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0, video.videoWidth, video.videoHeight);
        
            Video_Screen_Shot = canvas.toDataURL('image/jpeg');
            console.log('image ss = '+Video_Screen_Shot);
        }
    // video snap code
    
    
    var blobDATA = [];
    var fileItem;
    async function startRecording() {
        
        var videoType = '';
        function isIOSDevice(){
            return !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
        }
        if(isIOSDevice()){
            videoType = 'video/MP4';
        }
        else{
            videoType = 'video/webm';
        }
        
        const options = {
            videoBitsPerSecond : 800000, // important for set the video size..
            mimeType: videoType
        }
        
        media_recorder = new MediaRecorder(camera_stream, options);
        
        media_recorder.addEventListener('dataavailable', function(e) {
            blobs_recorded.push(e.data);
            //console.log('record -------------------------'+blobs_recorded);
            // blobDATA = blobs_recorded;
        });
        
        media_recorder.addEventListener('stop', function() {
            const userAgent = navigator.userAgent;
            video_local = URL.createObjectURL(new Blob(blobs_recorded, { type: videoType }));
            blobDATA = video_local;
            //console.log('rec link'+video_local);
            if(video_local != null){   
                const toDataURL = url => fetch(url)
                .then(response => response.blob())
                .then(blob => new Promise((resolve, reject) => {
                    const reader = new FileReader()
                    reader.onloadend = () => resolve(reader.result)
                    reader.onerror = reject
                    fileItem = blob;
                    reader.readAsDataURL(blob)
                }))
                //alert('toDataURL(video_local)------'+toDataURL(video_local));
                toDataURL(video_local)
                .then(dataUrl => {
                    //alert('RESULT:', dataUrl);
                    document.getElementById("preview").setAttribute("src", dataUrl);
                    document.getElementById("preview").setAttribute('playsinline', '');
                    document.getElementById("preview").setAttribute('controls', 'controls');
                    console.log('base64 size : '+dataUrl.length);
                    console.log('base64 size : '+dataUrl);
                    recordedData = dataUrl;
                    //alert('recordedData++'+recordedData);
                    blobs_recorded = [];
                })
                }
                });
                    
                    media_recorder.start();
                    
                    setTimeout(shoot, 500);
                    
                    setTimeout(stopFun, 3500);
                }
                    
                    function stopFun(){
                    //  alert('timeout Video Recorded : ');
                    media_recorder.stop(); 
                    var stream = video1.srcObject;
                    var tracks = stream.getTracks();
                    for (var i = 0; i < tracks.length; i++) {
                        var track = tracks[i];
                        track.stop();
                    }
                    video1.srcObject = null;
                    document.getElementById("Vid2").style.display = 'none';
                    document.getElementById("Vid3").style.display = 'Block'; 
                    updateStages('Video Preview');
                    //     document.getElementById("output").style.display = 'Block';
                }
                    
                    function StartRecButton() {
                    document.getElementById("circlebtn").innerHTML = '3';
                    var ctx = document.getElementById('Circle_button').getContext('2d');
                    var al = 0;
                    var start = 4.72;
                    if ( navigator.platform != "iPad" && navigator.platform != "iPhone" && navigator.platform != "iPod" ) {
                    cw = window.innerWidth; 
                    //I'll use window.innerWidth in production
                } else {
                    cw = screen.width;
                }
                    var ch = ctx.canvas.height;  
                    var diff;
                    function progressSim(){
                    diff = ((al / 100) * Math.PI*2*10).toFixed(2);
                    ctx.clearRect(0, 0, cw, ch);
                    ctx.lineWidth = 10;
                    ctx.textAlign = 'center';
                    ctx.strokeStyle = "green";
                    ctx.beginPath();
                    ctx.arc(50, 50, 40, start, diff/10+start, false);
                    ctx.stroke();
                    if(al >= 100){
                    clearTimeout(sim);
                    // Add scripting here that will run when progress completes
                }
                    al++;
                }
                    var sim = setInterval(progressSim, 35);
                    
                    // timer button
                    
                    let timeleft = 2;
                    let downloadTimer = setInterval(function(){
                    //console.log('downloadTimerdownloadTimer : '+downloadTimer);
                    if(timeleft <= 0){
                    clearInterval(downloadTimer);
                    document.getElementById("circlebtn").innerHTML = "start";
                } else {
                    document.getElementById("circlebtn").innerHTML = timeleft;
                    
                }
                    timeleft -= 1;
                    //console.log('to9me :: '+timeleft);
                }, 1350);
                    
                    //  console.log('downloadTimerdownloadTimer : '+downloadTimer);
                    document.getElementById('circlebtn').disabled = true;
                }
                    
                    function onVideoSec(){
                    document.getElementById("pb1").style.display = 'none';
                    document.getElementById("Vid1").style.display = 'Block';
                    
                }     
                    
                    function videoTakeAgain(){
                    var vid = document.getElementById("preview");
                    vid.pause();
                    var video1 = document.getElementById("videoRec");
                    
                    $("#startTest").load(location.href + " #startTest");//done
                    
                    startVideCam();
                    
                    document.getElementById("Vid3").style.display = 'none';
                    document.getElementById("Vid2").style.display = 'Block';
                    
                }  
                function videoconfirm(){
                    try {
                        sendVideoSS(Video_Screen_Shot);
                    }
                    catch(err) {
                        message = err.message;
                    }
                    currentdate = new Date();
                    startTime = currentdate.getDate() + "/"
                    + (currentdate.getMonth()+1)  + "/" 
                    + currentdate.getFullYear() + " @ "  
                    + currentdate.getHours() + ":"  
                    + currentdate.getMinutes() + ":" 
                    + currentdate.getSeconds();
                    console.log('start '+startTime);
                     document.getElementById("spin").style.display = 'Block';               
                    var vid = document.getElementById("preview");
                    vid.pause();
                    
                    if({!IF(voiS.VOI_stage__c == 'FULL' || voiS.VOI_stage__c == null,true,false)} ){
                        document.getElementById("pb1").style.display = 'Block';
                        document.getElementById("Vid3").style.display = 'none';
                        document.getElementById("SecondText").style.display = 'none';
                        document.getElementById("ThirdText").style.display = 'Block';
                        document.getElementById("icon1-2").style.display = 'None';
                        document.getElementById("icon1-3").style.display = 'Block';
                        document.getElementById("icon2-1").style.display = 'None'; 
                        document.getElementById("icon2-2").style.display = 'Block';
                        
                        document.querySelector('.box2').style.boxShadow = 'none';
                        document.querySelector('.box2').style.background = 'none';
                        document.querySelector('.box2').style.background = '#fafafa';
                        document.querySelector('.box2').style.border = '2px solid #eeeeee';
                        
                        document.querySelector('.box3').style.border = 'none';
                        document.querySelector('.box3').style.background = 'none';
                        document.querySelector('.box3').style.boxShadow = '5px 5px 5px 0px rgb(0 0 0 / 54%)';
                        document.querySelector('.box3').style.background = '#ffffff';    
                        
                        
                        document.getElementById("nextBtn").style.display = 'None';
                        document.getElementById("ReadSignBtn").style.display = 'Block';
                        // dataQuerymethod(); 
                        
                    }
                    else{
                        document.getElementById("Vid3").style.display = 'none';
                        document.getElementById("singleVOI").style.display = 'Block';
                        finishVOI();
                    }
                    sendVideo(recordedData);
                    
                }
                    
                    function StopSpin(){
                    updateStages('Video Uploaded');
                    document.getElementById("spin").style.display = 'none';
                    var newDate = new Date();
                    endTime = newDate.getDate() + "/"
                    + (newDate.getMonth()+1)  + "/" 
                    + newDate.getFullYear() + " @ "  
                    + newDate.getHours() + ":"  
                    + newDate.getMinutes() + ":" 
                    + newDate.getSeconds();
                    console.log('start +'+startTime);
                    console.log('END +'+endTime);
                    addLog(startTime,endTime, message);
                    
                }
                    
                    /*VIDEO SECTION ENDS*/
                    
                    /*READ AND SIGN FIRST SECTION STARTS*/
                    function ReadANDSign(){
                    document.getElementById("pb1").style.display = 'none';
                    document.getElementById("ReadSign1").style.display = 'Block';
                    updateOppStatus(); // for update opportunity status
                    updateStages('CPQ sign');                    
                    var SignaturePad = (function(document) {
                    "use strict";
                    
                    var log = console.log.bind(console);
                    
                    var SignaturePad = function(canvas, options) {
                    var self = this,
                    opts = options || {};
                    
                    this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;
                    this.minWidth = opts.minWidth || 0.5;
                    this.maxWidth = opts.maxWidth || 2.5;
                    this.dotSize = opts.dotSize || function() {
                    return (self.minWidth + self.maxWidth) / 2;
                };
                    this.penColor = opts.penColor || "black";
                    this.backgroundColor = opts.backgroundColor || "rgba(0,0,0,0)";
                    this.throttle = opts.throttle || 0;
                    this.throttleOptions = {
                    leading: true,
                    trailing: true
                };
                      this.minPointDistance = opts.minPointDistance || 0;
                      this.onEnd = opts.onEnd;
                      this.onBegin = opts.onBegin;
                      
                      this._canvas = canvas;
                      this._ctx = canvas.getContext("2d");
                this._ctx.lineCap = 'round';
                this.clear();
                
                // we need add these inline so they are available to unbind while still having
                //  access to 'self' we could use _.bind but it's not worth adding a dependency
                this._handleMouseDown = function(event) {
                    if (event.which === 1) {
                        self._mouseButtonDown = true;
                        self._strokeBegin(event);
                    }
                };
                
                var _handleMouseMove = function(event) {
                    event.preventDefault();
                    if (self._mouseButtonDown) {
                        self._strokeUpdate(event);
                        if (self.arePointsDisplayed) {
                            var point = self._createPoint(event);
                            self._drawMark(point.x, point.y, 5);
                        }
                    }
                };
                
                this._handleMouseMove = _.throttle(_handleMouseMove, self.throttle, self.throttleOptions);
                //this._handleMouseMove = _handleMouseMove;
                
                this._handleMouseUp = function(event) {
                    if (event.which === 1 && self._mouseButtonDown) {
                        self._mouseButtonDown = false;
                        self._strokeEnd(event);
                    }
                };
                
                this._handleTouchStart = function(event) {
                    if (event.targetTouches.length == 1) {
                        var touch = event.changedTouches[0];
                        self._strokeBegin(touch);
                    }
                };
                
                var _handleTouchMove = function(event) {
                    // Prevent scrolling.
                    event.preventDefault();
                    
                    var touch = event.targetTouches[0];
                    self._strokeUpdate(touch);
                    if (self.arePointsDisplayed) {
                        var point = self._createPoint(touch);
                        self._drawMark(point.x, point.y, 5);
                    }
                };
                this._handleTouchMove = _.throttle(_handleTouchMove, self.throttle, self.throttleOptions);
                //this._handleTouchMove = _handleTouchMove;
                
                this._handleTouchEnd = function(event) {
                    var wasCanvasTouched = event.target === self._canvas;
                    if (wasCanvasTouched) {
                        event.preventDefault();
                        self._strokeEnd(event);
                    }
                };
                
                this._handleMouseEvents();
                this._handleTouchEvents();
            };
            
            SignaturePad.prototype.clear = function() {
                var ctx = this._ctx,
                    canvas = this._canvas;
                
                ctx.fillStyle = this.backgroundColor;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                this._reset();
            };
            
            
            
            SignaturePad.prototype.toDataURL = function(imageType, quality) {
                var canvas = this._canvas;
                return canvas.toDataURL.apply(canvas, arguments);
            };
            
            SignaturePad.prototype.fromDataURL = function(dataUrl) {
                var self = this,
                    image = new Image(),
                    ratio = window.devicePixelRatio || 1,
                    width = this._canvas.width / ratio,
                    height = this._canvas.height / ratio;
                
                this._reset();
                image.src = dataUrl;
                image.onload = function() {
                    self._ctx.drawImage(image, 0, 0, width, height);
                };
                this._isEmpty = false;
            };
            
            SignaturePad.prototype._strokeUpdate = function(event) {
                var point = this._createPoint(event);
                if(this._isPointToBeUsed(point)){
                    this._addPoint(point);
                }
            };
            
            var pointsSkippedFromBeingAdded = 0;
            SignaturePad.prototype._isPointToBeUsed = function(point) {
                // Simplifying, De-noise
                if(!this.minPointDistance)
                    return true;
                
                var points = this.points;
                if(points && points.length){
                    var lastPoint = points[points.length-1];
                    if(point.distanceTo(lastPoint) < this.minPointDistance){
                        // log(++pointsSkippedFromBeingAdded);
                        return false;
                    }
                }
                return true;
            };
            
            SignaturePad.prototype._strokeBegin = function(event) {
                this._reset();
                this._strokeUpdate(event);
                if (typeof this.onBegin === 'function') {
                    this.onBegin(event);
                }
            };
            
            SignaturePad.prototype._strokeDraw = function(point) {
                var ctx = this._ctx,
                    dotSize = typeof(this.dotSize) === 'function' ? this.dotSize() : this.dotSize;
                
                ctx.beginPath();
                this._drawPoint(point.x, point.y, dotSize);
                ctx.closePath();
                ctx.fill();
            };
            
            SignaturePad.prototype._strokeEnd = function(event) {
                var canDrawCurve = this.points.length > 2,
                    point = this.points[0];
                
                if (!canDrawCurve && point) {
                    this._strokeDraw(point);
                }
                if (typeof this.onEnd === 'function') {
                    this.onEnd(event);
                }
            };
            
            SignaturePad.prototype._handleMouseEvents = function() {
                this._mouseButtonDown = false;
                
                this._canvas.addEventListener("mousedown", this._handleMouseDown);
                this._canvas.addEventListener("mousemove", this._handleMouseMove);
                document.addEventListener("mouseup", this._handleMouseUp);
            };
            
            SignaturePad.prototype._handleTouchEvents = function() {
                // Pass touch events to canvas element on mobile IE11 and Edge.
                this._canvas.style.msTouchAction = 'none';
                this._canvas.style.touchAction = 'none';
                
                this._canvas.addEventListener("touchstart", this._handleTouchStart);
                this._canvas.addEventListener("touchmove", this._handleTouchMove);
                this._canvas.addEventListener("touchend", this._handleTouchEnd);
            };
            
            SignaturePad.prototype.on = function() {
                this._handleMouseEvents();
                this._handleTouchEvents();
            };
            
            SignaturePad.prototype.off = function() {
                this._canvas.removeEventListener("mousedown", this._handleMouseDown);
                this._canvas.removeEventListener("mousemove", this._handleMouseMove);
                document.removeEventListener("mouseup", this._handleMouseUp);
                
                this._canvas.removeEventListener("touchstart", this._handleTouchStart);
                this._canvas.removeEventListener("touchmove", this._handleTouchMove);
                this._canvas.removeEventListener("touchend", this._handleTouchEnd);
            };
            
            SignaturePad.prototype.isEmpty = function() {
                return this._isEmpty;
            };
            
            SignaturePad.prototype._reset = function() {
                this.points = [];
                this._lastVelocity = 0;
                this._lastWidth = (this.minWidth + this.maxWidth) / 2;
                this._isEmpty = true;
                this._ctx.fillStyle = this.penColor;
            };
            
            SignaturePad.prototype._createPoint = function(event) {
                var rect = this._canvas.getBoundingClientRect();
                return new Point(
                    event.clientX - rect.left,
                    event.clientY - rect.top
                );
            };
            
            SignaturePad.prototype._addPoint = function(point) {
                var points = this.points,
                    c2, c3,
                    curve, tmp;
                
                points.push(point);
                
                if (points.length > 2) {
                    // To reduce the initial lag make it work with 3 points
                    // by copying the first point to the beginning.
                    if (points.length === 3) points.unshift(points[0]);
                    
                    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);
                    c2 = tmp.c2;
                    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);
                    c3 = tmp.c1;
                    curve = new Bezier(points[1], c2, c3, points[2]);
                    this._addCurve(curve);
                    
                    // Remove the first element from the list,
                    // so that we always have no more than 4 points in points array.
                    points.shift();
                }
            };
            
            SignaturePad.prototype._calculateCurveControlPoints = function(s1, s2, s3) {
                var dx1 = s1.x - s2.x,
                    dy1 = s1.y - s2.y,
                    dx2 = s2.x - s3.x,
                    dy2 = s2.y - s3.y,
                    
                    m1 = {
                        x: (s1.x + s2.x) / 2.0,
                        y: (s1.y + s2.y) / 2.0
                    },
                    m2 = {
                        x: (s2.x + s3.x) / 2.0,
                        y: (s2.y + s3.y) / 2.0
                    },
                    
                    l1 = Math.sqrt(1.0 * dx1 * dx1 + dy1 * dy1),
                    l2 = Math.sqrt(1.0 * dx2 * dx2 + dy2 * dy2),
                    
                    dxm = (m1.x - m2.x),
                    dym = (m1.y - m2.y),
                    
                    k = l2 / (l1 + l2),
                    cm = {
                        x: m2.x + dxm * k,
                        y: m2.y + dym * k
                    },
                    
                    tx = s2.x - cm.x,
                    ty = s2.y - cm.y;
                
                return {
                    c1: new Point(m1.x + tx, m1.y + ty),
                    c2: new Point(m2.x + tx, m2.y + ty)
                };
            };
            
            SignaturePad.prototype._addCurve = function(curve) {
                var startPoint = curve.startPoint,
                    endPoint = curve.endPoint,
                    velocity, newWidth;
                
                velocity = endPoint.velocityFrom(startPoint);
                velocity = this.velocityFilterWeight * velocity +
                    (1 - this.velocityFilterWeight) * this._lastVelocity;
                
                newWidth = this._strokeWidth(velocity);
                this._drawCurve(curve, this._lastWidth, newWidth);
                
                this._lastVelocity = velocity;
                this._lastWidth = newWidth;
            };
            
            SignaturePad.prototype._drawPoint = function(x, y, size) {
                var ctx = this._ctx;
                
                ctx.moveTo(x, y);
                ctx.arc(x, y, size, 0, 2 * Math.PI, false);
                this._isEmpty = false;
            };
            
            SignaturePad.prototype._drawMark = function(x, y, size) {
                var ctx = this._ctx;
                
                ctx.save();
                ctx.moveTo(x, y);
                ctx.arc(x, y, size, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'rgba(255, 0, 0, 0.2)';
                ctx.fill();
                ctx.restore();
            };
            
            SignaturePad.prototype._drawCurve = function(curve, startWidth, endWidth) {
                var ctx = this._ctx,
                    widthDelta = endWidth - startWidth,
                    drawSteps, width, i, t, tt, ttt, u, uu, uuu, x, y;
                
                drawSteps = Math.floor(curve.length());
                ctx.beginPath();
                for (i = 0; i < drawSteps; i++) {
                    // Calculate the Bezier (x, y) coordinate for this step.
                    t = i / drawSteps;
                    tt = t * t;
                    ttt = tt * t;
                    u = 1 - t;
                    uu = u * u;
                    uuu = uu * u;
                    
                    x = uuu * curve.startPoint.x;
                    x += 3 * uu * t * curve.control1.x;
                    x += 3 * u * tt * curve.control2.x;
                    x += ttt * curve.endPoint.x;
                    
                    y = uuu * curve.startPoint.y;
                    y += 3 * uu * t * curve.control1.y;
                    y += 3 * u * tt * curve.control2.y;
                    y += ttt * curve.endPoint.y;
                    
                    width = startWidth + ttt * widthDelta;
                    this._drawPoint(x, y, width);
                }
                ctx.closePath();
                ctx.fill();
            };
            
            SignaturePad.prototype._strokeWidth = function(velocity) {
                return Math.max(this.maxWidth / (velocity + 1), this.minWidth);
            };
            
            var Point = function(x, y, time) {
                this.x = x;
                this.y = y;
                this.time = time || new Date().getTime();
            };
            
            Point.prototype.velocityFrom = function(start) {
                return (this.time !== start.time) ? this.distanceTo(start) / (this.time - start.time) : 1;
            };
            
            Point.prototype.distanceTo = function(start) {
                return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));
            };
            
            var Bezier = function(startPoint, control1, control2, endPoint) {
                this.startPoint = startPoint;
                this.control1 = control1;
                this.control2 = control2;
                this.endPoint = endPoint;
            };
            
            // Returns approximated length.
            Bezier.prototype.length = function() {
                var steps = 10,
                    length = 0,
                    i, t, cx, cy, px, py, xdiff, ydiff;
                
                for (i = 0; i <= steps; i++) {
                    t = i / steps;
                    cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);
                    cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);
                    if (i > 0) {
                        xdiff = cx - px;
                        ydiff = cy - py;
                        length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);
                    }
                    px = cx;
                    py = cy;
                }
                return length;
            };
            
            Bezier.prototype._point = function(t, start, c1, c2, end) {
                return start * (1.0 - t) * (1.0 - t) * (1.0 - t) +
                    3.0 * c1 * (1.0 - t) * (1.0 - t) * t +
                    3.0 * c2 * (1.0 - t) * t * t +
                    end * t * t * t;
            };
            
            return SignaturePad;
        })(document);
        
        var signaturePad = new SignaturePad(document.getElementById('signature-pad'), {
            backgroundColor: 'rgba(255, 255, 255, 0)',
            penColor: 'rgb(0, 0, 0)',
            velocityFilterWeight: .9,
            minWidth: 0.5,
            maxWidth: 2.5,
            throttle: 16, // max x milli seconds on event update, OBS! this introduces lag for event update
            minPointDistance: 3,
        });
        var saveButton = document.getElementById('save'),
            clearButton = document.getElementById('clear');
        
        saveButton.addEventListener('click', function(event) {
            var data = signaturePad.toDataURL();
            if(data.length == 1614){
                alert('Please sign the Document');
                return;
            }
            else{
                document.getElementById('save').disabled = true;
                SendSign1Data(data);
                saveCanvasAndNext();
                
            }
            
        });
        
        clearButton.addEventListener('click', function(event) {
            signaturePad.clear();
        });
        
        var signSave = document.getElementById('signsignSave');
        signSave.addEventListener('click', function(event) {
            var data = signaturePad.toDataURL();
            //console.log('data'+data);
            //console.log('data'+data.length);
            if(data.length == 1614){
                alert('Please sign the Document : ');
                //document.getElementById("errorMSG").innerHTML = 'email not valid';
                //document.getElementById("errorMSG").style.color = 'red';
                return;
            }
            else{
                document.getElementById('signsignSave').disabled = true;
                OtherSign(data);
                //finishSignature();
            }
            
        });
        
    }
    
    /*READ AND SIGN FIRST SECTION ENDS*/          
    
    
    /*READ AND SIGN SECOND SECTION STARTS*/
    function saveCanvasAndNext(){
        document.getElementById("ReadSign1").style.display = 'none';
        document.getElementById("ReadSign2").style.display = 'Block';
        updateStages('TMCU sign');
        $(window).scrollTop(0); // IMPORTANT FOR SCROLLING THE SECTION.
        
        var SignaturePad = (function(document) {
            "use strict";
            
            var log = console.log.bind(console);
            
            var SignaturePad = function(canvas, options) {
                var self = this,
                    opts = options || {};
                
                this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;
                this.minWidth = opts.minWidth || 0.5;
                this.maxWidth = opts.maxWidth || 2.5;
                this.dotSize = opts.dotSize || function() {
                    return (self.minWidth + self.maxWidth) / 2;
                };
                this.penColor = opts.penColor || "black";
                this.backgroundColor = opts.backgroundColor || "rgba(0,0,0,0)";
                this.throttle = opts.throttle || 0;
                this.throttleOptions = {
                    leading: true,
                    trailing: true
                };
                this.minPointDistance = opts.minPointDistance || 0;
                this.onEnd = opts.onEnd;
                this.onBegin = opts.onBegin;
                
                this._canvas = canvas;
                this._ctx = canvas.getContext("2d");
                this._ctx.lineCap = 'round';
                this.clear();
                
                // we need add these inline so they are available to unbind while still having
                //  access to 'self' we could use _.bind but it's not worth adding a dependency
                this._handleMouseDown = function(event) {
                    if (event.which === 1) {
                        self._mouseButtonDown = true;
                        self._strokeBegin(event);
                    }
                };
                
                var _handleMouseMove = function(event) {
                    event.preventDefault();
                    if (self._mouseButtonDown) {
                        self._strokeUpdate(event);
                        if (self.arePointsDisplayed) {
                            var point = self._createPoint(event);
                            self._drawMark(point.x, point.y, 5);
                        }
                    }
                };
                
                this._handleMouseMove = _.throttle(_handleMouseMove, self.throttle, self.throttleOptions);
                //this._handleMouseMove = _handleMouseMove;
                
                this._handleMouseUp = function(event) {
                    if (event.which === 1 && self._mouseButtonDown) {
                        self._mouseButtonDown = false;
                        self._strokeEnd(event);
                    }
                };
                
                this._handleTouchStart = function(event) {
                    if (event.targetTouches.length == 1) {
                        var touch = event.changedTouches[0];
                        self._strokeBegin(touch);
                    }
                };
                
                var _handleTouchMove = function(event) {
                    // Prevent scrolling.
                    event.preventDefault();
                    
                    var touch = event.targetTouches[0];
                    self._strokeUpdate(touch);
                    if (self.arePointsDisplayed) {
                        var point = self._createPoint(touch);
                        self._drawMark(point.x, point.y, 5);
                    }
                };
                this._handleTouchMove = _.throttle(_handleTouchMove, self.throttle, self.throttleOptions);
                //this._handleTouchMove = _handleTouchMove;
                
                this._handleTouchEnd = function(event) {
                    var wasCanvasTouched = event.target === self._canvas;
                    if (wasCanvasTouched) {
                        event.preventDefault();
                        self._strokeEnd(event);
                    }
                };
                
                this._handleMouseEvents();
                this._handleTouchEvents();
            };
            
            SignaturePad.prototype.clear = function() {
                var ctx = this._ctx,
                    canvas = this._canvas;
                
                ctx.fillStyle = this.backgroundColor;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                this._reset();
            };
            
            
            
            SignaturePad.prototype.toDataURL = function(imageType, quality) {
                var canvas = this._canvas;
                return canvas.toDataURL.apply(canvas, arguments);
            };
            
            SignaturePad.prototype.fromDataURL = function(dataUrl) {
                var self = this,
                    image = new Image(),
                    ratio = window.devicePixelRatio || 1,
                    width = this._canvas.width / ratio,
                    height = this._canvas.height / ratio;
                
                this._reset();
                image.src = dataUrl;
                image.onload = function() {
                    self._ctx.drawImage(image, 0, 0, width, height);
                };
                this._isEmpty = false;
            };
            
            SignaturePad.prototype._strokeUpdate = function(event) {
                var point = this._createPoint(event);
                if(this._isPointToBeUsed(point)){
                    this._addPoint(point);
                }
            };
            
            var pointsSkippedFromBeingAdded = 0;
            SignaturePad.prototype._isPointToBeUsed = function(point) {
                // Simplifying, De-noise
                if(!this.minPointDistance)
                    return true;
                
                var points = this.points;
                if(points && points.length){
                    var lastPoint = points[points.length-1];
                    if(point.distanceTo(lastPoint) < this.minPointDistance){
                        // log(++pointsSkippedFromBeingAdded);
                        return false;
                    }
                }
                return true;
            };
            
            SignaturePad.prototype._strokeBegin = function(event) {
                this._reset();
                this._strokeUpdate(event);
                if (typeof this.onBegin === 'function') {
                    this.onBegin(event);
                }
            };
            
            SignaturePad.prototype._strokeDraw = function(point) {
                var ctx = this._ctx,
                    dotSize = typeof(this.dotSize) === 'function' ? this.dotSize() : this.dotSize;
                
                ctx.beginPath();
                this._drawPoint(point.x, point.y, dotSize);
                ctx.closePath();
                ctx.fill();
            };
            
            SignaturePad.prototype._strokeEnd = function(event) {
                var canDrawCurve = this.points.length > 2,
                    point = this.points[0];
                
                if (!canDrawCurve && point) {
                    this._strokeDraw(point);
                }
                if (typeof this.onEnd === 'function') {
                    this.onEnd(event);
                }
            };
            
            SignaturePad.prototype._handleMouseEvents = function() {
                this._mouseButtonDown = false;
                
                this._canvas.addEventListener("mousedown", this._handleMouseDown);
                this._canvas.addEventListener("mousemove", this._handleMouseMove);
                document.addEventListener("mouseup", this._handleMouseUp);
            };
            
            SignaturePad.prototype._handleTouchEvents = function() {
                // Pass touch events to canvas element on mobile IE11 and Edge.
                this._canvas.style.msTouchAction = 'none';
                this._canvas.style.touchAction = 'none';
                
                this._canvas.addEventListener("touchstart", this._handleTouchStart);
                this._canvas.addEventListener("touchmove", this._handleTouchMove);
                this._canvas.addEventListener("touchend", this._handleTouchEnd);
            };
            
            SignaturePad.prototype.on = function() {
                this._handleMouseEvents();
                this._handleTouchEvents();
            };
            
            SignaturePad.prototype.off = function() {
                this._canvas.removeEventListener("mousedown", this._handleMouseDown);
                this._canvas.removeEventListener("mousemove", this._handleMouseMove);
                document.removeEventListener("mouseup", this._handleMouseUp);
                
                this._canvas.removeEventListener("touchstart", this._handleTouchStart);
                this._canvas.removeEventListener("touchmove", this._handleTouchMove);
                this._canvas.removeEventListener("touchend", this._handleTouchEnd);
            };
            
            SignaturePad.prototype.isEmpty = function() {
                return this._isEmpty;
            };
            
            SignaturePad.prototype._reset = function() {
                this.points = [];
                this._lastVelocity = 0;
                this._lastWidth = (this.minWidth + this.maxWidth) / 2;
                this._isEmpty = true;
                this._ctx.fillStyle = this.penColor;
            };
            
            SignaturePad.prototype._createPoint = function(event) {
                var rect = this._canvas.getBoundingClientRect();
                return new Point(
                    event.clientX - rect.left,
                    event.clientY - rect.top
                );
            };
            
            SignaturePad.prototype._addPoint = function(point) {
                var points = this.points,
                    c2, c3,
                    curve, tmp;
                
                points.push(point);
                
                if (points.length > 2) {
                    // To reduce the initial lag make it work with 3 points
                    // by copying the first point to the beginning.
                    if (points.length === 3) points.unshift(points[0]);
                    
                    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);
                    c2 = tmp.c2;
                    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);
                    c3 = tmp.c1;
                    curve = new Bezier(points[1], c2, c3, points[2]);
                    this._addCurve(curve);
                    
                    // Remove the first element from the list,
                    // so that we always have no more than 4 points in points array.
                    points.shift();
                }
            };
            
            SignaturePad.prototype._calculateCurveControlPoints = function(s1, s2, s3) {
                var dx1 = s1.x - s2.x,
                    dy1 = s1.y - s2.y,
                    dx2 = s2.x - s3.x,
                    dy2 = s2.y - s3.y,
                    
                    m1 = {
                        x: (s1.x + s2.x) / 2.0,
                        y: (s1.y + s2.y) / 2.0
                    },
                    m2 = {
                        x: (s2.x + s3.x) / 2.0,
                        y: (s2.y + s3.y) / 2.0
                    },
                    
                    l1 = Math.sqrt(1.0 * dx1 * dx1 + dy1 * dy1),
                    l2 = Math.sqrt(1.0 * dx2 * dx2 + dy2 * dy2),
                    
                    dxm = (m1.x - m2.x),
                    dym = (m1.y - m2.y),
                    
                    k = l2 / (l1 + l2),
                    cm = {
                        x: m2.x + dxm * k,
                        y: m2.y + dym * k
                    },
                    
                    tx = s2.x - cm.x,
                    ty = s2.y - cm.y;
                
                return {
                    c1: new Point(m1.x + tx, m1.y + ty),
                    c2: new Point(m2.x + tx, m2.y + ty)
                };
            };
            
            SignaturePad.prototype._addCurve = function(curve) {
                var startPoint = curve.startPoint,
                    endPoint = curve.endPoint,
                    velocity, newWidth;
                
                velocity = endPoint.velocityFrom(startPoint);
                velocity = this.velocityFilterWeight * velocity +
                    (1 - this.velocityFilterWeight) * this._lastVelocity;
                
                newWidth = this._strokeWidth(velocity);
                this._drawCurve(curve, this._lastWidth, newWidth);
                
                this._lastVelocity = velocity;
                this._lastWidth = newWidth;
            };
            
            SignaturePad.prototype._drawPoint = function(x, y, size) {
                var ctx = this._ctx;
                
                ctx.moveTo(x, y);
                ctx.arc(x, y, size, 0, 2 * Math.PI, false);
                this._isEmpty = false;
            };
            
            SignaturePad.prototype._drawMark = function(x, y, size) {
                var ctx = this._ctx;
                
                ctx.save();
                ctx.moveTo(x, y);
                ctx.arc(x, y, size, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'rgba(255, 0, 0, 0.2)';
                ctx.fill();
                ctx.restore();
            };
            
            SignaturePad.prototype._drawCurve = function(curve, startWidth, endWidth) {
                var ctx = this._ctx,
                    widthDelta = endWidth - startWidth,
                    drawSteps, width, i, t, tt, ttt, u, uu, uuu, x, y;
                
                drawSteps = Math.floor(curve.length());
                ctx.beginPath();
                for (i = 0; i < drawSteps; i++) {
                    // Calculate the Bezier (x, y) coordinate for this step.
                    t = i / drawSteps;
                    tt = t * t;
                    ttt = tt * t;
                    u = 1 - t;
                    uu = u * u;
                    uuu = uu * u;
                    
                    x = uuu * curve.startPoint.x;
                    x += 3 * uu * t * curve.control1.x;
                    x += 3 * u * tt * curve.control2.x;
                    x += ttt * curve.endPoint.x;
                    
                    y = uuu * curve.startPoint.y;
                    y += 3 * uu * t * curve.control1.y;
                    y += 3 * u * tt * curve.control2.y;
                    y += ttt * curve.endPoint.y;
                    
                    width = startWidth + ttt * widthDelta;
                    this._drawPoint(x, y, width);
                }
                ctx.closePath();
                ctx.fill();
            };
            
            SignaturePad.prototype._strokeWidth = function(velocity) {
                return Math.max(this.maxWidth / (velocity + 1), this.minWidth);
            };
            
            var Point = function(x, y, time) {
                this.x = x;
                this.y = y;
                this.time = time || new Date().getTime();
            };
            
            Point.prototype.velocityFrom = function(start) {
                return (this.time !== start.time) ? this.distanceTo(start) / (this.time - start.time) : 1;
            };
            
            Point.prototype.distanceTo = function(start) {
                return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));
            };
            
            var Bezier = function(startPoint, control1, control2, endPoint) {
                this.startPoint = startPoint;
                this.control1 = control1;
                this.control2 = control2;
                this.endPoint = endPoint;
            };
            
            // Returns approximated length.
            Bezier.prototype.length = function() {
                var steps = 10,
                    length = 0,
                    i, t, cx, cy, px, py, xdiff, ydiff;
                
                for (i = 0; i <= steps; i++) {
                    t = i / steps;
                    cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);
                    cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);
                    if (i > 0) {
                        xdiff = cx - px;
                        ydiff = cy - py;
                        length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);
                    }
                    px = cx;
                    py = cy;
                }
                return length;
            };
            
            Bezier.prototype._point = function(t, start, c1, c2, end) {
                return start * (1.0 - t) * (1.0 - t) * (1.0 - t) +
                    3.0 * c1 * (1.0 - t) * (1.0 - t) * t +
                    3.0 * c2 * (1.0 - t) * t * t +
                    end * t * t * t;
            };
            
            return SignaturePad;
        })(document);
        
        var signaturePad = new SignaturePad(document.getElementById('signature-pad-sec'), {
            backgroundColor: 'rgba(255, 255, 255, 0)',
            penColor: 'rgb(0, 0, 0)',
            velocityFilterWeight: .9,
            minWidth: 0.5,
            maxWidth: 2.5,
            throttle: 16, // max x milli seconds on event update, OBS! this introduces lag for event update
            minPointDistance: 3,
        });
        var saveButton = document.getElementById('save-sign-sec'),
            clearButton = document.getElementById('clear-sign-sec');
        
        saveButton.addEventListener('click', function(event) {
            var data = signaturePad.toDataURL();
            //console.log('data'+data);
            ///console.log('data.length'+data.length);
            var taxResi = document.getElementById("tax-resident").value;
            
            var taxFn = document.getElementById("taxFNumber").value;
            
            var tinN = document.getElementById("tinNumber").value;
            
            var numberOfap = document.getElementById("selectApplicant").value;
            
            if(taxResi.length == 0 && numberOfap.length == 10){
                document.getElementById('tax-resident').style.border = '1px solid red';
                document.getElementById('selectApplicant').style.border = '1px solid red';
                return;
            }
            else{
                document.getElementById('tax-resident').style.border = '1px solid grey';
                document.getElementById('selectApplicant').style.border = '1px solid grey';
            }
            
            if(taxResi.length == 0){
                document.getElementById('tax-resident').style.border = '1px solid red';
                return;
            }
            else{
                document.getElementById('tax-resident').style.border = '1px solid grey';
            }
            
            if(numberOfap.length == 10){
                document.getElementById('selectApplicant').style.border = '1px solid red';
                return;
            }
            else{
                document.getElementById('selectApplicant').style.border = '1px solid grey';
            }
            
            
            if(data.length == 1614){
                alert('Please sign the Document : ');
                return;
            }
            else{
                document.getElementById('save-sign-sec').disabled = true;
                sApp(numberOfap, taxResi, (taxFn.length == 0 ? '' : taxFn), (tinN.length == 0 ? '' : tinN));
                SendSign2Data(data);
            }
            //window.open(data);
        });
        clearButton.addEventListener('click', function(event) {
            signaturePad.clear();
        });  
    }
    
    /*SIGN SECTION TWO*/
    
    function finishSignature(){
        document.getElementById("spin").style.display = 'Block';
        //alert(IsErrorOnVOI);
        if(IsErrorOnVOI == true){
            document.getElementById("ReadSign1").style.display = 'none';
            document.getElementById("ReadSign2").style.display = 'none';
            document.getElementById("relaxDiv").style.display = 'Block';            
        }
        else{
            document.getElementById("ReadSign1").style.display = 'none';
            document.getElementById("ReadSign2").style.display = 'none';
            document.getElementById("pb1").style.display = 'Block';
            document.getElementById("icon2-2").style.display = 'none';
            document.getElementById("icon2-3").style.display = 'Block';
            document.getElementById("ReadSignBtn").style.display = 'none';  
            document.getElementById("FinishBtn").style.display = 'Block';   
            
            document.getElementById("ThirdText").style.display = 'none';
            
            document.getElementById("FourthText").style.display = 'Block';
            
            
            document.getElementById("firstAnchor").style.display = 'none';
            
            document.getElementById("2ndAnchor").style.display = 'Block';
            
            document.querySelector('.box3').style.boxShadow = 'none';
            document.querySelector('.box3').style.background = 'none';
            document.querySelector('.box3').style.background = '#fafafa';
            document.querySelector('.box3').style.border = '2px solid #eeeeee';
        }
        GeneratePDF();
        
    }
    
    /*READ AND SIGN SECOND SECTION ENDS*/
    /*Important code for collapse*/
    var coll = document.getElementsByClassName("collapsible");
    var i;
    
    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.maxHeight){
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + "px";
            } 
        });
    }
    /*Important code for collapse*/
    
    
    </script>
</apex:page>